<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>
    OL 的杂物间
</title>
<meta charset="utf-8">
    
<script src="/js/beforebody.js"></script>

    
<link rel="stylesheet" href="/css/layout.css">

    
<link rel="stylesheet" href="/css/prism.css">

    
<link rel="stylesheet" href="/css/prism-line-numbers.css">

    <!-- <title>
        TEST TITLE
    </title> -->
<meta name="generator" content="Hexo 5.4.2"></head>
<body>
    <!-- 顶栏整体导航菜单 -->
    <div class="ui top menu">
        <!-- 左对齐 logo -->
        <a class="logo" href="/">
            Logo
        </a>
        <!-- 右对齐部分导航 -->
        <div id="rightali">
            <a class="item" id="Home" href="/">
                Home
            </a>
            <a class="item" id="Arch" href="/archives">
                Archives
            </a>
            <a class="item" id="Cate" href="/categories">
                Categories
            </a>
            <a class="item" id="Tags" href="/tags">
                Tags
            </a>
            <a class="item" id="Frie" href="/friends">
                Friends
            </a>
            <a class="item" id="Abou" href="/about">
                About
            </a>
            <!-- 下拉菜单 -->
            <div class="drop down item flex" href="/interests">
                <!-- 假的 Interests，用于触发下拉菜单 -->
                <!-- 设计参考了 SYZOJ -->
                <div>
                    Interests
                </div>
                <!-- 下拉菜单本体 -->
                <div class="drop down menu">
                    <a class="item dotted border" id="Inte" href="/interests">
                        Interests
                    </a>
                    <a class="drop down item ex" href="/imgs">
                        Images
                    </a>
                    <a class="drop down item ex" href="/videos">
                        Videos
                    </a>
                    <a class="drop down item ex" href="/musics">
                        Musics
                    </a>
                    <a class="drop down item ex" href="/interests">
                        More...
                    </a>
                </div>
            </div>
        </div>

        
    </div>

    
<link rel="stylesheet" href="/css/post.css">

<div class="ui post container">
    <a href="">
        <div class="ui post title">
            <div id="fortitle">
                浅记 / 零基础打造 Hexo 主题
            </div>
            <div class="ui title background">
            </div>
        </div>
    </a>
    <div class="ui text container">
        <p>行。目前摆在你面前的是这样的一个纯萌新：</p>
<ul>
<li>熟练 C/C++ （没用）</li>
<li>会写 Python （没用）</li>
<li>会写 CSS （有点小用）</li>
<li>会写 HTML （有点小用）</li>
<li>看得懂 YAML （有点小用）</li>
</ul>
<p>得。我的评价是：</p>
<p><img src="https://pic.imgdb.cn/item/63a51c9008b6830163c887d7.png"></p>
<span id="more"></span>

<p>现在，我正看着 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/yyhh/p/11058985.html">这篇博客</a> 和 <a target="_blank" rel="noopener" href="https://www.bilibili.com/read/readlist/rl244492">这篇博客</a>，研究着一个全新的、只属于我自己的主题。</p>
<p>然后再鉴于 Gitee 的聪明实名认证，我已经很久没碰过 Hexo 了，总之现在整体评价是：寄。</p>
<hr>
<p>首先是非常熟悉且亲民的创建博客。敲下 <code>hexo init</code> 的瞬间，我还是比较有种「梦开始的地方」的感触。</p>
<p>然后我按照教程新建主题文件夹：</p>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain">- OLTest
    - layout
        - _partial
            - header.ejs
            - footer.ejs
        - layout.ejs
        - index.ejs
        - post.ejs
    - scripts
    - source
        - css
        - js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>layout.ejs</code> 是在页面中使用 <code>layout</code>（默认）进行渲染时用到的文件。</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 网站标题 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 显示中文 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    这里是 layout.ejs

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>不对啊，这不是 ejs 吗？为什么这些代码是 HTML 代码呢？</p>
<p>因为 ejs 中可以直接写 HTML。真是人性化啊。</p>
<hr>
<p>然后，重新 <code>hexo s</code> 应该就能看到一行「这里是 layout.ejs」了……</p>
<p>呃，怎么还是乱码？</p>
<p>行，我的 VSC 为了迎合聪明的 DEV，把默认文件编码设成了 GB 2312。不得已之下只能把所有文件手动转编码为 UTF-8。寄中之寄。</p>
<hr>
<p>然后我们简单学习一下 js。</p>
<p>我这里是跟着 <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/js/index.asp">w3school</a> 的流程走的，因为这方面比较零基础，所以比较寄。</p>
<ul>
<li><p>首先是 <code>document</code>。因为 js 的语法基本为 <code>sth.sth</code>，所以需要一个「变量」来表示「所有」。所以表示「整个页面」的 <code>document</code> 就产生了（莫名有种 <code>this</code> 的韵味？）。</p>
</li>
<li><p>然后是 <code>getElementById()</code>，这个我认识，<code>Element</code> 是指一段用 <code>&lt;&gt;  &lt;/&gt;</code> 框起来的 HTML 代码，<code>Id</code> 就是 Element 中的 <code>id</code> 属性。</p>
<p>所以这个函数的功能就像它的名字一样，根据括号中给定的待查找 Id，找到对应的 HTML 标签。</p>
<p>例子：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>OL<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        OL is lovely.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'OL'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"orange"</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p> <font color="red" id="OL"> OL is lovely. </font> </p>
<script type="text/javascript">
    document.getElementById('OL').color = "orange";
</script>

<p>可以看到，原本应该是红色的文字在这段 js 代码的修改下变为了可爱的橙色。</p>
<p>然后是一些对于我来说比较新奇的东西：</p>
<ul>
<li><p>首先是 <code>innerHTML </code> 成员（？）。代表着 HTML 标签中用 <code>&lt;&gt;   &lt;/&gt;</code> 括起来的东西。</p>
<p>比如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Logos<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    我于此言语——
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'Logos'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'——即是丧钟的亡庭！'</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
    继续
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p id="Logos">
    我于此言语——
</p>
<button onclick="document.getElementById('Logos').innerHTML = '——即是丧钟的亡庭！'">
    继续
</button></li>
<li><p>你可以访问 <code>style</code> 的内部成员，例如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MyDear<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    莫听穿林打叶声。
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'MyDear'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"#067a08"</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p id="MyDear"> 莫听穿林打叶声。 </p>
<script type="text/javascript">
    document.getElementById('MyDear').style.color = "#067a08";
</script></li>
</ul>
</li>
</ul>
<p>然后接下来我失去了耐心，随手翻了翻发现剩下的好像是 C++ 和 py 的结合体（？），所以直接下一步吧。</p>
<hr>
<p>接下来我们学习一下 ejs 的标签语法基础。</p>
<p>Hexo 的渲染模块本身可以使用 Swig 和 ejs，这里我选用了更简单易学、不用安装额外插件的 ejs。</p>
<p>首先，ejs 标签和 html 标签相似，每段代码以「<code>&lt;%</code> + 某字符」开头，以 <code>%&gt;</code> 结尾。而开头的「某字符」，也会决定这段代码的功能。</p>
<ul>
<li><p><code>&lt;%  %&gt;</code> 表示直接执行里面的 js 代码。</p>
<p>如：</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> Ehe <span class="token operator">=</span> <span class="token string">'Ehe te nandayo!'</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>会定义一个名为 <code>Ehe</code> 的变量，其值为 <code>&quot;Ehe te nandayo!&quot;</code>，但不会有输出。</p>
</li>
<li><p><code>&lt;%-  %&gt;</code> 表示执行非转义输出；相应地，<code>&lt;%=   %&gt;</code> 表示执行转义输出。中间的内容为可输出内容。</p>
<p>这个定义就很迷。我探究了好久才明白这玩意儿是干啥用的。</p>
<p>就相当于是 <code>cout</code>，你可以 <code>&lt;%- 1 + 1 %&gt;</code> 或 <code>&lt;%= 1 + 1 %&gt;</code>，让页面显示 <code>2</code>，也可以 <code>&lt;%- Ehe %&gt;</code> 或 <code>&lt;%= Ehe %&gt;</code>，输出 <code>Ehe te nandayo!</code>。</p>
<p>那么 <code>&lt;%-  %&gt; </code> 和 <code>&lt;%=  %&gt;</code> 有什么不同呢？</p>
<p><code>&lt;%-   %&gt;</code> 会先得到要输出的值，再对值进行计算（比如数字运算，字符串拼接），再对结果进行 HTML 编译（？），再将编译后的结果输出。而  <code>&lt;%=   %&gt;</code> 则没有最后一步操作。</p>
<p>比如：</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> str1 <span class="token operator">=</span> <span class="token string">"&lt;di"</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> str2 <span class="token operator">=</span> <span class="token string">"v> qwq &lt;/d"</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token language-javascript"> <span class="token keyword">var</span> str3 <span class="token operator">=</span> <span class="token string">"iv>"</span><span class="token punctuation">;</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> str1 <span class="token operator">+</span> str2 <span class="token operator">+</span> str3 </span><span class="token delimiter punctuation">%></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%=</span><span class="token language-javascript"> str1 <span class="token operator">+</span> str2 <span class="token operator">+</span> str3 </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>会输出：</p>
<pre class="line-numbers language-plain" data-language="plain"><code class="language-plain"> qwq
&lt;div> qwq &lt;/div> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>也就是说，<code>&lt;%-  %&gt;</code> 将 <code>str1 + str2 + str3</code> 进行了 HTML 编译（？）。</p>
</li>
<li><p><code>&lt;%#   %&gt;</code> 是注释。与 <code>/*   */</code> 类似。</p>
</li>
<li><p><code>&lt;%- include(&quot; PATH OF EJS &quot;) %&gt;</code>  和 C++ 中的 <code>#include</code> 功能，呃，不类似。更多的是像函数调用一样，直接「调用」了某一个其他 ejs 文件中的内容。</p>
</li>
</ul>
<p>ejs 本身远远不止标签这一功能。只是因为标签就够用了，所以暂时只学标签。</p>
<hr>
<p>Hexo 预先为我们准备好了一些变量，我们可以在 js 中调用它们。</p>
<p>下面引用了 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/variables">Hexo 官方网站</a> 的描述，其中 <code>objects</code> 类似于结构体变量，<code>array</code> 类似于数组，<code>string</code> 类似于字符串。</p>
<table>
<thead>
<tr>
<th align="center">变量</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>site.posts</code></td>
<td align="center">由 <code>post</code> 构成的 <code>array</code>，代表所有文章</td>
</tr>
<tr>
<td align="center"><code>site.pages</code></td>
<td align="center">由 <code>page</code> 构成的 <code>array</code>，代表所有页面</td>
</tr>
<tr>
<td align="center"><code>site.categories</code></td>
<td align="center">所有分类</td>
</tr>
<tr>
<td align="center">懒得写了</td>
<td align="center">大家可以在需要时自行进入我给出的官网链接查阅，这样快得多</td>
</tr>
</tbody></table>
<hr>
<p>我们发现，Hexo 为我们提供了 <code>&lt;%- partial( PATH OF EJS ) %&gt;</code> 标签，可以将内容放入单独的 ejs 文件，实现类似于 <code>&lt;%- include(&#39;&#39;) %&gt;</code> 的功能。所以我们可以把刚刚的 <code>layout.ejs</code> 内容更改如下：</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/header.ejs'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> body </span><span class="token delimiter punctuation">%></span></span>

    <span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/footer.ejs'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其中 <code>&lt;%- body %&gt;</code> 相当于 <code>&lt;%- include(&#39;index.ejs&#39;) %&gt;</code>。</p>
<hr>
<p>接下来 <code>hexo s</code> 一下，就可以看到我们在 <code>index.ejs</code> 中的内容了。只是形式较为返璞归真。</p>
<p>接下来，我们就必须脱离所有教程，从零开始为自己的博客编写 CSS 和 js 了。</p>
<p>首先必须对网站的结构有一个大致的规划。</p>
<p>我是想制作一个【数据删除】风格的主题，我访问了一下官网，基本没有对主题设计的收获（不像舟游官网，风格明显），于是我决定直接自己上手设计。</p>
<p>首先设计一下主页：</p>
<p><img src="https://pic.imgdb.cn/item/63a8fbf608b6830163328c8e.jpg"></p>
<p>所以我们首先先写一个 Banner。</p>
<hr>
<p>我决定尝试用载入 CSS 的方法（Hexo 提供函数：<code>&lt;%- css(&#39;PATH OF CSS&#39;) %&gt;</code>）实现主页 Banner 背景，所以我在 <code>index.ejs</code> 中载入了 <code>css</code> 文件夹下一个叫 <code>index.css</code> 的样式：</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'index.css'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>但是当我 <code>hexo s</code> 的时候，没有效果，F12 提示：</p>
<p><img src="https://pic.imgdb.cn/item/63a9076208b683016340c405.jpg"></p>
<p>我们发现，本来应该载入 <code>/css/index.css</code> 的资源，却载入了 <code>/index.css</code>。解决方案：加上 <code>css/</code>：</p>
<pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%-</span><span class="token language-javascript"> <span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'css/index.css'</span><span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<hr>

    </div>
</div>

    
    <script>
        SetActiveItem();
    </script>
</body>
</html>