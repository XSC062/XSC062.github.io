{
    "version": "https://jsonfeed.org/version/1",
    "title": "null â€¢ All posts by \"æ ‘çŠ¶æ•°ç»„\" tag",
    "description": "",
    "home_page_url": "https://xsc062.netlify.app",
    "items": [
        {
            "id": "https://xsc062.netlify.app/20240106/",
            "url": "https://xsc062.netlify.app/20240106/",
            "title": "æ‚é¢˜å…¨è°ˆ",
            "date_published": "2024-01-06T03:27:39.000Z",
            "content_html": "<p>æƒ³ä¸åˆ°å¥½æ ‡é¢˜äº†ã€‚</p>\n<span id=\"more\"></span>\n<p>æœ‰å¥è¯æ€ä¹ˆè¯´æ¥ç€ï¼Œç½—é©¬ä¸æ˜¯ä¸€å¤©å»ºæˆçš„ï¼Œæ˜¯ä¸€å¤©å¤©å»ºæˆçš„ã€‚</p>\n<p>è¿˜æœ‰ä»€ä¹ˆï¼ŒDo in Rome as the Romansâ€™ doï¼Œè¿˜æœ‰ä¸€å¥ï¼ŒAll roads leads to Romeã€‚</p>\n<hr />\n<h3 id=\"a.-è¿ç»­çš„é›¶-zero\">A. è¿ç»­çš„é›¶ zero</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4647/problem/1\" class=\"uri\">http://222.180.160.110:61235/contest/4647/problem/1</a></p>\n<p>åšä¸ªå‰ç¼€å’Œï¼Œçœ‹çœ‹ä»»æ„ä¸€ä¸ªé•¿åº¦ä¸º <span class=\"math inline\">\\(k\\)</span> çš„åŒºé—´ä¸­æœ‰å‡ ä¸ª <span class=\"math inline\">\\(1\\)</span>ã€‚å¤æ‚åº¦ <span class=\"math inline\">\\(O(n)\\)</span>ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>namespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxn = 5e5 + 5;\nconst int inf = 0x3f3f3f3f;\nint n, m, res = inf;\nint a[maxn], s[maxn];\nint min(int x, int y) &#123;\n    return x &lt; y ? x : y;\n&#125;\nint main() &#123;\n    scanf(&quot;%d %d&quot;, &amp;n, &amp;m);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        scanf(&quot;%1d&quot;, &amp;a[i]);\n        s[i] = s[i - 1] + a[i];\n        if (i &gt;= m)\n            res = min(res, s[i] - s[i - m]);\n    &#125;\n    print(res, &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062</code></pre>\n</details>\n<hr />\n<h3 id=\"b.-åå›æ–‡ä¸²-anti\">B. åå›æ–‡ä¸² anti</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4647/problem/2\" class=\"uri\">http://222.180.160.110:61235/contest/4647/problem/2</a></p>\n<p>å½“ <span class=\"math inline\">\\(n\\)</span> ä¸ºå¥‡æ—¶ï¼Œä¸­é—´çš„å…ƒç´ ä¸€å®šå’Œè‡ªå·±ç›¸ç­‰ï¼Œæ•…æ— è§£ã€‚</p>\n<p>å½“æ•°é‡æœ€å¤šçš„ä¸€ä¸ªå­—ç¬¦ä¸ªæ•°è¶…è¿‡ <span class=\"math inline\">\\(\\dfrac n2\\)</span> æ—¶ï¼Œç”±é¸½å·¢å¾—æ— è§£ã€‚</p>\n<p>å‰©ä¸‹çš„æƒ…å†µä¸€å®šæœ‰è§£ã€‚</p>\n<details>\n<p><summary>è¯æ˜</summary></p>\n<p>å¯ä»¥æ‰¾åˆ°ä¸€ç§åˆæ³•çš„æ„é€ æ–¹å¼ã€‚æˆ‘ä»¬åˆ—å‡ºä¸€ä¸ªåˆ—æ•°ä¸º <span class=\"math inline\">\\(2\\)</span>ï¼Œè¡Œæ•°ä¸º <span class=\"math inline\">\\(\\dfrac n2\\)</span> çš„è¡¨æ ¼ï¼Œå°†æ‰€æœ‰ç›¸åŒå­—æ¯æ’åˆ—åœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼å°†å­—æ¯å¡«å…¥è¡¨æ ¼ï¼Œæœ€åå°†ç¬¬ <span class=\"math inline\">\\(i\\)</span> è¡Œç¬¬ä¸€åˆ—çš„å­—æ¯å¡«å…¥ <span class=\"math inline\">\\(a_i\\)</span>ï¼Œç¬¬ <span class=\"math inline\">\\(i\\)</span> è¡Œç¬¬äºŒåˆ—çš„å­—æ¯å¡«å…¥ <span class=\"math inline\">\\(a_{n-i+1}\\)</span>ï¼Œå³å¯å®Œæˆæ„é€ ã€‚</p>\n<p>ä¸€ç§å­—æ¯åªåœ¨ç¬¬ä¸€åˆ—æˆ–ç¬¬äºŒåˆ—å‡ºç°å½“ç„¶åˆæ³•ï¼Œå¦‚æœä»ç¬¬ä¸€åˆ—æŒç»­åˆ°ç¬¬äºŒåˆ—ï¼Œå› ä¸ºä»»æ„å­—æ¯å‡ºç°æ¬¡æ•°ä¸è¶…è¿‡ <span class=\"math inline\">\\(\\dfrac n2\\)</span> æ¬¡ï¼Œæ‰€ä»¥åŒä¸€è¡Œçš„ä¸¤åˆ—ä¸ä¼šå‡ºç°åŒä¸€ç§å­—æ¯ã€‚</p>\n<p>è¿™å«ä»€ä¹ˆï¼Œæœ‰å­—è¯æ˜ã€‚</p>\n<p><del>æ„Ÿè§‰å¯ä»¥æ‹¿å»å‡ºä¸€é“ç±»ä¼¼äºã€Œæ‰¾åˆ°å­—ç¬¦ä¸²å­—å…¸åºæœ€å°çš„åå›æ–‡ä¸²ã€ä¹‹ç±»çš„å°æ°´é¢˜</del></p>\n</details>\n<p>ç„¶åç°åœ¨æˆ‘ä»¬çŸ¥é“æœ‰è§£äº†ï¼Œæ€ä¹ˆæ‰¾åˆ°æœ€ä¼˜è§£å‘¢ã€‚</p>\n<p>æ¯”å¦‚æœ‰ä¸€ç»„ <span class=\"math inline\">\\((a_i,a_{n-i+1})=(\\texttt a, \\texttt a)\\)</span>ï¼Œè¿˜æœ‰ä¸€ç»„ <span class=\"math inline\">\\((a_j, a_{n-j+1})=(\\texttt b, \\texttt b)\\)</span>ï¼Œé‚£æˆ‘ä»¬ç›´æ¥æŠŠ <span class=\"math inline\">\\(a_i\\)</span> å’Œ <span class=\"math inline\">\\(a_j\\)</span> äº¤æ¢ï¼Œçš†å¤§æ¬¢å–œã€‚</p>\n<p>è¿™å°±è¯´æ˜æˆ‘ä»¬éœ€è¦æŠŠå€¼ä¸ç›¸ç­‰çš„éæ³• <span class=\"math inline\">\\(a_i\\)</span> ä¸ <span class=\"math inline\">\\(a_j\\)</span> é…å¯¹ã€‚</p>\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ²¿ç”¨è¯æ˜ä¸­çš„æ„é€ æ–¹å¼ï¼Œåˆ†ç»„é…å¯¹ï¼Œä¸€å®šæœ€ä¼˜ï¼Œæ¯ç»„ä»£ä»·ä¸º <span class=\"math inline\">\\(1\\)</span>ã€‚</p>\n<p>åŒä¸€è¡Œä¸¤ä¸ªå€¼ <span class=\"math inline\">\\(v\\)</span> ç›¸ç­‰ï¼Œå› ä¸ºå·²ç»æœ€ä¼˜äº†ï¼Œæ‰€ä»¥ä¸èƒ½å†åœ¨éæ³•ä¸²ä¸­å¯»æ‰¾ç­”æ¡ˆã€‚åº”è¯¥æ‰¾åˆæ³•å¯¹ä¸­æŸä¸ªå€¼äº¤æ¢ï¼Œæ¯ç»„ä»£ä»·ä¸º <span class=\"math inline\">\\(2\\)</span>ã€‚å…·ä½“å’Œè°äº¤æ¢æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒï¼Œåªè¦æ‰¾åˆ°ä¸€ç»„ <span class=\"math inline\">\\((a_i,a_{n-i+1})\\)</span> æ»¡è¶³ <span class=\"math inline\">\\(a_i\\ne v\\)</span> ä¸” <span class=\"math inline\">\\(a_{n-i+1}\\ne v\\)</span> å°±å¯ä»¥äº†ï¼Œç„¶åæˆ‘ä»¬åˆçŸ¥é“ <span class=\"math inline\">\\(v\\)</span> çš„ä¸ªæ•° <span class=\"math inline\">\\(\\ne \\dfrac n2\\)</span>ï¼Œå‡è®¾ <span class=\"math inline\">\\(\\dfrac n2\\)</span> å¯¹ä¸­æ¯é˜Ÿéƒ½æœ‰è‡³å°‘ä¸€ä¸ª <span class=\"math inline\">\\(v\\)</span>ï¼Œç”±äºå½“å‰è¿™ä¸€å¯¹æœ‰ä¸¤ä¸ªç›¸åŒçš„ <span class=\"math inline\">\\(v\\)</span>ï¼Œé‚£ä¹ˆ <span class=\"math inline\">\\(v\\)</span> çš„ä¸ªæ•°å°±ä¼šå¤§äº <span class=\"math inline\">\\(\\dfrac n2\\)</span>ï¼ŒçŸ›ç›¾äº†ï¼Œæ‰€ä»¥ä¸€å®šèƒ½æ‰¾åˆ°ã€‚</p>\n<p>å¯¹äºéæ³•æ€»å¯¹æ•°æ˜¯å¥‡æ•°çš„æƒ…å†µï¼Œæˆ‘ä»¬è¦é’¦å®šä¸€ä¸ªéæ³•å¯¹å¼ºåˆ¶è®©å…¶å’Œåˆæ³•å¯¹äº¤æ¢ï¼Œè´ªå¿ƒä¸€ä¸‹å–éæ³•å¯¹æ•°é‡æœ€å¤šçš„ <span class=\"math inline\">\\(v\\)</span> çš„æŸä¸€å¯¹æœ€ä¼˜ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>namespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxm = 35;\nconst int maxn = 2e5 + 5;\nchar s[maxn];\nint cnt[maxm], p[maxn];\nint T, n, tot, res, now;\nint main() &#123;\n    scanf(&quot;%d&quot;, &amp;T);\n    while (T--) &#123;\n        tot = 0;\n        scanf(&quot;%d %s&quot;, &amp;n, s + 1);\n        if (n &amp; 1) &#123;\n            puts(&quot;-1&quot;);\n            continue;\n        &#125;\n        memset(cnt, 0, sizeof (cnt));\n        for (int i = 1; i &lt;= n; ++i)\n            ++cnt[s[i] - &#39;a&#39; + 1];\n        for (int i = 1; i &lt;= 26; ++i) &#123;\n            if (cnt[i] * 2 &gt; n) &#123;\n                puts(&quot;-1&quot;);\n                goto noSol;\n            &#125;\n        &#125;\n        memset(cnt, 0, sizeof (cnt));\n        for (int i = 1; i * 2 &lt;= n; ++i) &#123;\n            if (s[i] == s[n - i + 1])\n                ++cnt[s[i] - &#39;a&#39; + 1], ++tot;\n        &#125;\n        std::sort(cnt + 1, cnt + 27,\n                    std::greater&lt;int&gt;());\n        res = now = 0;\n        if (tot &amp; 1) &#123;\n            res = 1, --cnt[1];\n            std::sort(cnt + 1, cnt + 27,\n                        std::greater&lt;int&gt;());\n        &#125;\n        for (int i = 1; i &lt;= 26; ++i) &#123;\n            while (cnt[i]--) &#123;\n                if (++now &gt; tot / 2) &#123;\n                    if (i == p[now - tot / 2])\n                        res += 2;\n                    else ++res;\n                &#125;\n                else p[now] = i;\n            &#125;\n        &#125;\n        print(res, &#39;\\n&#39;);\n        noSol: ;\n    &#125;\n    return 0;\n&#125;\n&#125; // namespace XSC062</code></pre>\n</details>\n<hr />\n<h3 id=\"c.-é™¤ä¸å‡-divsub\">C. é™¤ä¸å‡ divsub</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4647/problem/3\" class=\"uri\">http://222.180.160.110:61235/contest/4647/problem/3</a></p>\n<p>å°æ•°å­¦ï¼Œè¿˜å¥½ã€‚</p>\n<p>å‡è®¾ <span class=\"math inline\">\\(n=d\\times k^p\\)</span>ï¼Œå…¶ä¸­ <span class=\"math inline\">\\(k\\nmid d\\)</span>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºã€‚</p>\n<ol type=\"1\">\n<li><p><span class=\"math inline\">\\(p=0\\)</span>ï¼Œå³ <span class=\"math inline\">\\(k\\nmid n\\)</span>ï¼Œé‚£ä¹ˆ <span class=\"math inline\">\\(n\\bmod k=1\\)</span>ï¼Œå³ <span class=\"math inline\">\\(k\\mid (n-1)\\)</span>ã€‚</p>\nè¿™ä¸ªæ—¶å€™é—® <span class=\"math inline\">\\(k\\)</span> çš„ä¸ªæ•°å°±ç›¸å½“äºæ˜¯åœ¨é—® <span class=\"math inline\">\\(n-1\\)</span> é™¤ <span class=\"math inline\">\\(1\\)</span> ä»¥å¤–çš„å› å­ä¸ªæ•°ã€‚å‡è®¾ <span class=\"math inline\">\\(n-1={x_1}^{p_1}{x_2}^{p_2}\\cdots {x_m}^{p_m}\\)</span>ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸º <span class=\"math inline\">\\((\\prod p_i+1)-1\\)</span>ï¼Œå‡å»çš„æ˜¯ <span class=\"math inline\">\\(1\\)</span>ã€‚</li>\n<li><p><span class=\"math inline\">\\(p\\ne 0\\)</span>ï¼Œ<span class=\"math inline\">\\(k\\mid n\\)</span>ã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½çš„è½¬åŒ–ã€‚å¥½æ¶ˆæ¯æ˜¯ <span class=\"math inline\">\\(n\\)</span> çš„èŒƒå›´æ˜¯ <span class=\"math inline\">\\(10^{12}\\)</span>ï¼Œæ ¹å·æšä¸¾å› æ•°å¤æ‚åº¦è·‘å¾—è¿‡ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æš´åŠ›åˆ¤å®š <span class=\"math inline\">\\(n\\)</span> çš„æ‰€æœ‰å› æ•°æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚</p></li>\n</ol>\n<p>æ—¶é—´å¤æ‚åº¦ï¼Œ<span class=\"math inline\">\\(O(\\sqrt n\\times \\log n)\\)</span>ï¼Œæšä¸¾å› æ•°æ˜¯æ ¹å·ï¼Œç®—æ¬¡æ•°ï¼ˆä¹Ÿå°±æ˜¯ç®— <span class=\"math inline\">\\(d\\)</span>ï¼‰æ˜¯ <span class=\"math inline\">\\(\\log\\)</span>ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>#define int long long\nnamespace XSC062 &#123;\nusing namespace fastIO;\nint n, m, res, cnt;\nint main() &#123;\n    read(n), m = n;\n    for (int i = 2; i * i &lt;= n; ++i) &#123;\n        if (n % i == 0) &#123;\n            m = n;\n            while (m % i == 0) m /= i;\n            if (m % i == 1) ++res;\n            if (i * i != n) &#123;\n                m = n;\n                while (m % (n / i) == 0)\n                    m /= (n / i);\n                if (m % (n / i) == 1) ++res;\n            &#125;\n        &#125;\n    &#125;\n    m = n - 1, cnt = 1;\n    for (int i = 2; i * i &lt;= m; ++i) &#123;\n        if (m % i == 0) &#123;\n            int now = 0;\n            while (m % i == 0)\n                ++now, m /= i;\n            cnt *= now + 1;\n        &#125;\n    &#125;\n    if (m != 1) cnt *= 2;\n    print(res + cnt, &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n</details>\n<hr />\n<h3 id=\"d.-å›¾ä¹¦ç®¡ç†å‘˜-librarian\">D. å›¾ä¹¦ç®¡ç†å‘˜ librarian</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4647/problem/4\" class=\"uri\">http://222.180.160.110:61235/contest/4647/problem/4</a></p>\n<p>[SDOI2008] éƒé—·çš„å° Jã€‚</p>\n<p>å…³äºè¿™ä¸ªï¼Œæˆ‘ä»¬å‘ç°è‡ªå·±ä¸ä¼šè€ƒåœºç°å†²ä¸»å¸­æ ‘ã€‚å“ï¼Œæ‰“ CDQ åˆæ€•å†™æŒ‚ã€‚</p>\n<p>æˆ‘ä»¬å‘ç°è¿™é“é¢˜çš„ä¿®æ”¹éƒ½æ˜¯å•ç‚¹çš„ï¼Œè¯¢é—®ä¹Ÿåªå…³äºæŸä¸€ç§é¢œè‰²ï¼Œä¸åŒçš„é¢œè‰²ä¹‹é—´æ²¡æœ‰å½±å“ã€‚</p>\n<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æŠŠæ“ä½œç¦»çº¿ä¸‹æ¥ï¼Œåˆå§‹è§†ä½œå°†æŸé¢œè‰²åœ¨æŸä½ç½®å¢åŠ ï¼Œä¿®æ”¹è§†ä½œå°†æŸé¢œè‰²åœ¨æŸä½ç½®åˆ é™¤ï¼Œå°†å¦ä¸€é¢œè‰²åœ¨è¯¥ä½ç½®å¢åŠ ï¼Œå°†æ‰€æœ‰æ“ä½œæŒ‰é¢œè‰²ç¦»æ•£åŒ–åˆ†ç±»ç„¶å <code>vector</code> ä¸‹æ¥ï¼Œå¯¹äºæ‰€æœ‰é¢œè‰²ä»å‰åˆ°åæ ‘çŠ¶æ•°ç»„åšä¸€éæ“ä½œå°±èƒ½ <span class=\"math inline\">\\(O(n\\log n+q\\log n)\\)</span> è§£å†³ã€‚</p>\n<p>æ ‘çŠ¶æ•°ç»„æ¸…ç©ºæ˜¯è‚¯å®šä¸èƒ½ <code>memset</code> çš„ï¼Œå¤æ‚åº¦ä¸å¯¹ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼ŸæŠŠæ‰€æœ‰æ“ä½œæ’¤å›å»å°±å¯ä»¥äº†ã€‚</p>\n<p>é¡ºå¸¦ä¸€ææˆ‘æ˜¯æ´›è°·ä¸Šæœ€ä¼˜è§£ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>namespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxn = 2e5 + 5;\nstruct __ &#123;\n    int ty, l, r, v;\n    __() &#123;&#125;\n    __(int t1, int l1, int r1, int v1 = 0) &#123;\n        if (t1 == 0)\n            ty = 0, l = l1, v = r1;\n        else ty = 1, l = l1, r = r1, v = v1;\n    &#125;\n&#125;;\nchar ty;\nstd::map&lt;int, int&gt; tab;\nstd::vector&lt;__&gt; q[maxn];\nint n, m, tot, x, y, v, id;\nint Bit[maxn], a[maxn], res[maxn];\nint lowbit(int x) &#123; return x &amp; -x; &#125;\nvoid add(int x, int v) &#123;\n    for (; x &lt;= n; x += lowbit(x))\n        Bit[x] += v;\n    return;\n&#125;\nint ask(int x) &#123;\n    int res = 0;\n    for (; x; x -= lowbit(x)) res += Bit[x];\n    return res;\n&#125;\nint main() &#123;\n    read(n), read(m);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        read(a[i]);\n        if (!tab.count(a[i]))\n            tab[a[i]] = ++tot;\n        a[i] = tab[a[i]];\n        q[a[i]].emplace_back(0, i, 1);\n    &#125;\n    while (m--) &#123;\n        scanf(&quot;%1s&quot;, &amp;ty);\n        if (ty == &#39;C&#39;) &#123;\n            read(x), read(y);\n            if (!tab.count(y))\n                tab[y] = ++tot;\n            y = tab[y];\n            q[a[x]].emplace_back(0, x, -1);\n            q[a[x] = y].emplace_back(0, x, 1);\n        &#125;\n        else &#123;\n            ++id;\n            read(x), read(y), read(v);\n            if (!tab.count(v)) continue;\n            v = tab[v];\n            q[v].emplace_back(1, x, y, id);\n        &#125;\n    &#125;\n    for (int i = 1; i &lt;= tot; ++i) &#123;\n        for (auto &amp;j : q[i]) &#123;\n            if (j.ty == 0) add(j.l, j.v);\n            else &#123;\n                res[j.v] =\n                    ask(j.r) - ask(j.l - 1);\n            &#125;\n        &#125;\n        for (auto &amp;j : q[i])\n            if (j.ty == 0) add(j.l, -j.v);\n    &#125;\n    for (int i = 1; i &lt;= id; ++i)\n        print(res[i], &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062</code></pre>\n</details>\n<hr />\n<p>E ä¼šå•ç‹¬å¼€ä¸€ç¯‡ã€‚</p>\n<hr />\n<h3 id=\"f.-æ ‘-tree\">F. æ ‘ tree</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4647/problem/6\" class=\"uri\">http://222.180.160.110:61235/contest/4647/problem/6</a></p>\n<p>CF916Eã€‚</p>\n<p>å¤§åˆ†è®¨ç»™æˆ‘æ•´ä¸ä¼šäº†ï¼Œæ›´ç»™æˆ‘æ•´ä¸ä¼šçš„æ˜¯ä¸‹æ¥è¿‡åå‘ç°è¿™åªæ˜¯ä¸ªå°åˆ†è®¨ã€‚</p>\n<p>æ›´æ–°å­æ ‘å’Œå­æ ‘æŸ¥è¯¢æˆ‘ä»¬éƒ½ä¼šã€‚æ¢æ ¹ DP æˆ‘ä»¬ä¹Ÿéƒ½å†™è¿‡ï¼Œéƒ½çŸ¥é“æ¢æ ¹å¹¶ä¸ä¼šå¯¹å­æ ‘ç»“æ„äº§ç”Ÿå¤§çš„å½±å“ã€‚æ‰€ä»¥åº”å½“æ˜¯èƒ½æ ¹æ®å·²çŸ¥ä¿¡æ¯æ¨æµ‹å‡ºå­æ ‘åœ¨åŸæ ‘ä¸Šå¯¹åº”çš„ç‚¹é›†çš„ã€‚</p>\n<p>è®° <span class=\"math inline\">\\(r\\)</span> ä¸ºå½“å‰æ ‘æ ¹ï¼Œ<span class=\"math inline\">\\(\\text {LCA}(x,y)\\)</span> ä¸º <span class=\"math inline\">\\(x,y\\)</span> åœ¨ <span class=\"math inline\">\\(1\\)</span> ä¸ºæ ¹æ—¶çš„ LCAï¼Œ<span class=\"math inline\">\\(\\text {LCA}&#39;(x,y)\\)</span> è¡¨ç¤º <span class=\"math inline\">\\(x,y\\)</span> åœ¨ <span class=\"math inline\">\\(r\\)</span> ä¸ºæ ¹æ—¶çš„ LCAã€‚</p>\n<p>é‚£ä¹ˆå¯¹äº <span class=\"math inline\">\\(\\text {LCA}&#39;(x,y)\\)</span>ï¼Œè‚¯å®šæ˜¯è¦è®¨è®º <span class=\"math inline\">\\(x,y\\)</span> å’Œ <span class=\"math inline\">\\(r\\)</span> çš„ä½ç½®å…³ç³»çš„ã€‚</p>\n<ol type=\"1\">\n<li><span class=\"math inline\">\\(\\text {LCA}(x,y)\\)</span> æ˜¯ <span class=\"math inline\">\\(r\\)</span> çš„å­å­™ã€‚æ­¤æ—¶ <span class=\"math inline\">\\(\\text {LCA}&#39;(x,y) = \\text {LCA}(x,y)\\)</span>ã€‚</li>\n<li><span class=\"math inline\">\\(\\text {LCA}(x,y)\\)</span> æ˜¯ <span class=\"math inline\">\\(r\\)</span> çš„ç¥–å…ˆã€‚é‚£ä¹ˆè¯´æ˜è‡³å°‘æœ‰ä¸€ä¸ªç‚¹ä¸æ˜¯ <span class=\"math inline\">\\(r\\)</span> çš„å­å­™ã€‚æ­¤æ—¶ <span class=\"math inline\">\\(\\text {LCA}(x,y)&#39;\\)</span> çš„å€¼ä¸º <span class=\"math inline\">\\(r\\)</span> ä¸ºå¦ä¸€ä¸ªç‚¹çš„ LCAã€‚</li>\n</ol>\n<p>æ•´ç†å¯å¾— <span class=\"math inline\">\\(\\text {LCA}&#39;(x,y)\\)</span> æ˜¯ <span class=\"math inline\">\\(\\text {LCA}(x,y)\\)</span>ã€<span class=\"math inline\">\\(\\text {LCA}(x,r)\\)</span> å’Œ <span class=\"math inline\">\\(\\text {LCA}(y,r)\\)</span> ä¸­çš„æ·±åº¦æœ€å¤§è€…ã€‚</p>\n<p>å¯¹äºä»¥ <span class=\"math inline\">\\(r\\)</span> ä¸ºæ ¹æ—¶çš„å­æ ‘ <span class=\"math inline\">\\(x\\)</span>ï¼š</p>\n<ol type=\"1\">\n<li><span class=\"math inline\">\\(x=r\\)</span>ï¼Œæ­¤æ—¶å­æ ‘ä¸ºæ•´æ£µæ ‘ã€‚</li>\n<li><span class=\"math inline\">\\(\\text {LCA}(x,r)\\ne x\\)</span>ï¼Œå³ <span class=\"math inline\">\\(r\\)</span> ä¸ä¸º <span class=\"math inline\">\\(x\\)</span> çš„å­å­™ï¼Œæ­¤æ—¶å­æ ‘å°±æ˜¯ä»¥ <span class=\"math inline\">\\(1\\)</span> ä¸ºæ ¹æ˜¯çš„å­æ ‘ <span class=\"math inline\">\\(x\\)</span>ã€‚</li>\n<li><span class=\"math inline\">\\(\\text {LCA}(x,y)=x\\)</span>ï¼Œå³ <span class=\"math inline\">\\(r\\)</span> ä¸º <span class=\"math inline\">\\(x\\)</span> çš„å­å­™ï¼Œæ­¤æ—¶å­æ ‘æ˜¯æ•´æ£µæ ‘é™¤å¼€ <span class=\"math inline\">\\(x\\)</span> åŒ…å« <span class=\"math inline\">\\(r\\)</span> çš„å„¿å­åŠå…¶å­å­™ã€‚ä¿®æ”¹å’ŒæŸ¥è¯¢çš„æ—¶å€™å®¹æ–¥ä¸€ä¸‹å°±å¥½ã€‚è¿™ä¸ªæ—¶å€™çš„å­æ ‘å€å¢è·³ä¸€ä¸‹å°±èƒ½æ‰¾åˆ°ã€‚</li>\n</ol>\n<p>ç„¶åå°±æ˜¯å¸¸è§„çº¿æ®µæ ‘ç»´æŠ¤äº†ã€‚æ—¶é—´å¤æ‚åº¦ <span class=\"math inline\">\\(O(n\\log n)\\)</span>ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>namespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxm = 35;\nconst int maxn = 1e5 + 5;\n#define lt (p &lt;&lt; 1)\n#define rt (lt | 1)\nstruct _ &#123; int l, r, u, d; &#125;;\n_ t[maxn &lt;&lt; 2];\nint f[maxn][maxm];\nstd::vector&lt;int&gt; g[maxn];\nint a[maxn], dfn[maxn], rfn[maxn];\nint n, q, r, ty, x, y, v, si, now;\nint top[maxn], dep[maxn], tab[maxn];\nvoid swap(int &amp;x, int &amp;y) &#123;\n    x ^= y ^= x ^= y;\n    return;\n&#125;\nvoid DFS(int x) &#123;\n    dep[x] = dep[f[x][0]] + 1;\n    dfn[x] = ++now, tab[now] = x;\n    for (auto i : g[x]) &#123;\n        if (i == f[x][0]) continue;\n        f[i][0] = x;\n        for (int j = 1; j &lt;= si; ++j)\n            f[i][j] = f[f[i][j - 1]][j - 1];\n        DFS(i);\n    &#125;\n    rfn[x] = now;\n    return;\n&#125;\nvoid pushup(int p) &#123;\n    t[p].u = t[lt].u + t[rt].u;\n    return;\n&#125;\nvoid pushdown(int p) &#123;\n    if (t[p].d) &#123;\n        t[lt].d += t[p].d;\n        t[rt].d += t[p].d;\n        t[lt].u += t[p].d *\n                (t[lt].r - t[lt].l + 1);\n        t[rt].u += t[p].d *\n                (t[rt].r - t[rt].l + 1);\n        t[p].d = 0;\n    &#125;\n    return;\n&#125;\nvoid bld(int p, int l, int r) &#123;\n    t[p].l = l, t[p].r = r;\n    if (l == r) &#123;\n        t[p].u = a[tab[l]];\n        return;\n    &#125;\n    int mid = (l + r) &gt;&gt; 1;\n    bld(lt, l, mid), bld(rt, mid + 1, r);\n    pushup(p);\n    return;\n&#125;\nvoid add(int p, int x, int v) &#123;\n    t[p].u += v;\n    if (t[p].l == t[p].r) return;\n    pushdown(p);\n    int mid = (t[p].l + t[p].r) &gt;&gt; 1;\n    if (x &lt;= mid) add(lt, x, v);\n    else add(rt, x, v);\n    return;\n&#125;\nvoid add(int p, int l, int r, int v) &#123;\n    if (l &lt;= t[p].l &amp;&amp; t[p].r &lt;= r) &#123;\n        t[p].d += v;\n        t[p].u += (t[p].r - t[p].l + 1) * v;\n        return;\n    &#125;\n    pushdown(p);\n    int mid = (t[p].l + t[p].r) &gt;&gt; 1;\n    if (l &lt;= mid) add(lt, l, r, v);\n    if (r &gt; mid) add(rt, l, r, v);\n    pushup(p);\n    return;\n&#125;\nint ask(int p, int l, int r) &#123;\n    if (l &lt;= t[p].l &amp;&amp; t[p].r &lt;= r)\n        return t[p].u;\n    pushdown(p);\n    int res = 0,\n        mid = (t[p].l + t[p].r) &gt;&gt; 1;\n    if (l &lt;= mid) res = ask(lt, l, r);\n    if (r &gt; mid) res += ask(rt, l, r);\n    return res;\n&#125;\nint LCA(int x, int y) &#123;\n    if (dep[x] &lt; dep[y]) swap(x, y);\n    for (int i = si; ~i; --i) &#123;\n        if (dep[f[x][i]] &gt;= dep[y])\n            x = f[x][i];\n    &#125;\n    if (x == y) return x;\n    for (int i = si; ~i; --i) &#123;\n        if (f[x][i] != f[y][i])\n            x = f[x][i], y = f[y][i];\n    &#125;\n    return f[x][0];\n&#125;\nvoid Add(int x, int v) &#123;\n    int rlca = LCA(r, x);\n    if (x == r) add(1, 1, n, v);\n    else if (rlca != x)\n        add(1, dfn[x], rfn[x], v);\n    else &#123;\n        add(1, 1, n, v);\n        int p = r;\n        for (int i = si; ~i; --i) &#123;\n            if (dep[f[p][i]] &gt;= dep[x] + 1)\n                p = f[p][i];\n        &#125;\n        add(1, dfn[p], rfn[p], -v);\n    &#125;\n    return;\n&#125;\nvoid tAdd(int x, int y, int v) &#123;\n    int llca = LCA(r, x), rlca = LCA(r, y),\n        ulca = LCA(x, y);\n    if (dep[llca] &gt;= dep[rlca] &amp;&amp;\n        dep[llca] &gt;= dep[ulca]) Add(llca, v);\n    else if (dep[rlca] &gt;= dep[llca] &amp;&amp;\n        dep[rlca] &gt;= dep[ulca]) Add(rlca, v);\n    else Add(ulca, v);\n    return;\n&#125;\nint tAsk(int x) &#123;\n    int rlca = LCA(r, x);\n    if (x == r) return t[1].u;\n    if (rlca != x)\n        return ask(1, dfn[x], rfn[x]);\n    int p = r;\n    for (int i = si; ~i; --i) &#123;\n        if (dep[f[p][i]] &gt;= dep[x] + 1)\n            p = f[p][i];\n    &#125;\n    return t[1].u - ask(1, dfn[p], rfn[p]);\n&#125;\nvoid add(int x, int y) &#123;\n    g[x].push_back(y);\n    return;\n&#125;\nint main() &#123;\n    read(n), read(q), r = 1;\n    si = log(n) / log(2.0);\n    for (int i = 1; i &lt;= n; ++i) read(a[i]);\n    for (int i = 1; i &lt; n; ++i) &#123;\n        read(x), read(y);\n        add(x, y), add(y, x);\n    &#125;\n    dep[0] = 1, DFS(1), dep[0] = 0;\n    bld(1, 1, n);\n    while (q--) &#123;\n        read(ty);\n        if (ty == 1) read(r);\n        else if (ty == 2) &#123;\n            read(x), read(y), read(v);\n            tAdd(x, y, v);\n        &#125;\n        else &#123;\n            read(x);\n            print(tAsk(x), &#39;\\n&#39;);\n        &#125;\n    &#125;\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n</details>\n",
            "tags": [
                "çº¿æ®µæ ‘",
                "æ ‘çŠ¶æ•°ç»„",
                "LCA",
                "å€å¢",
                "é¸½å·¢åŸç†"
            ]
        },
        {
            "id": "https://xsc062.netlify.app/20231004-1/",
            "url": "https://xsc062.netlify.app/20231004-1/",
            "title": "æ‚é¢˜",
            "date_published": "2023-10-04T08:41:40.000Z",
            "content_html": "<p><a href=\"http://222.180.160.110:61235/contest/4272\">ç‰›å®¢æ™®åŠ</a>ã€‚</p>\n<span id=\"more\"></span>\n<hr />\n<h3 id=\"a.-å­¦ä¹ æ±‚ä½™\">A. å­¦ä¹ æ±‚ä½™</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4272/problem/1\" class=\"uri\">http://222.180.160.110:61235/contest/4272/problem/1</a></p>\n<p>ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ æ±‚ä½™ï¼è¿™ç§é¢˜æ”¾æ™®åŠ T1 ä¸åˆé€‚å§ï¼</p>\n<p>ä»¤ <span class=\"math inline\">\\(k=\\left\\lfloor \\dfrac n2 \\right\\rfloor + 1\\)</span>ï¼Œç›´æ¥è¾“å‡º <span class=\"math inline\">\\(k\\times (n - k)\\)</span> å³å¯ã€‚</p>\n<details>\n<p><summary>æˆ‘æ˜¯ä¸æ˜¯è¯å¤æ‚äº†â€¦</summary></p>\n<p>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å‘ç°ä¸€ä¸ªé“ç†ï¼Œå¯¹äºä»»æ„ <span class=\"math inline\">\\(\\dfrac n2&lt;x\\le n\\)</span>ï¼Œ<span class=\"math inline\">\\(n\\bmod x\\)</span> çš„å€¼æ˜¯ <span class=\"math inline\">\\(n - x\\)</span>ï¼›</p>\n<p>æ ¹æ®åŸºæœ¬ä¸ç­‰å¼ï¼ˆ<del>wjs ç›´æ¥æ„ŸåŠ¨å¾—å“­å‡ºå£°æ¥</del>ï¼‰æˆ–å°å­¦çŸ¥è¯†ã€Œå’Œä¸å˜ï¼Œå·®å°ç§¯å¤§ã€ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å½“ <span class=\"math inline\">\\(x=\\left\\lfloor \\dfrac n2 \\right\\rfloor + 1\\)</span> æ—¶ï¼Œ<span class=\"math inline\">\\(x\\times (n-x)\\)</span> å–æœ€å¤§å€¼ã€‚</p>\n<p>æ•…æœ‰ï¼šå½“ <span class=\"math inline\">\\(x=\\left\\lfloor \\dfrac n2 \\right\\rfloor + 1\\)</span> æ—¶ï¼Œ<span class=\"math inline\">\\(x\\times (n\\bmod x)\\)</span> å–æœ€å¤§å€¼ã€‚</p>\n<p>è€Œå¯¹äº <span class=\"math inline\">\\(y\\le \\dfrac n2\\)</span>ï¼Œç”±ä½™æ•°å°äºé™¤æ•°å¾—ï¼Œ<span class=\"math inline\">\\(n\\bmod y&lt;y\\le \\dfrac n2\\)</span>ã€‚ç”±äº <span class=\"math inline\">\\(0&lt;y&lt;x=\\left\\lfloor \\dfrac n2 \\right\\rfloor + 1\\)</span> ä¸” <span class=\"math inline\">\\(0\\le n\\bmod y\\le \\left\\lfloor \\dfrac n2 \\right\\rfloor - 1\\le n - \\left\\lfloor \\dfrac n2 \\right\\rfloor - 1=n\\bmod x\\)</span>ï¼Œç”±ä¸ç­‰å¼çš„åŸºæœ¬æ€§è´¨å¾— <span class=\"math inline\">\\(x\\times(n\\bmod x)&gt;y\\times (n\\bmod y)\\)</span>ã€‚</p>\n<p>ç»¼ä¸Šï¼Œå¯¹äº <span class=\"math inline\">\\(1\\le x\\le n\\)</span>ï¼Œå½“ <span class=\"math inline\">\\(x=\\left\\lfloor \\dfrac n2 \\right\\rfloor + 1\\)</span> æ—¶ï¼Œ<span class=\"math inline\">\\(x\\times (n\\bmod x)\\)</span> æœ‰æœ€å¤§å€¼ã€‚</p>\n</details>\n<p>ç„¶åå¦‚æœä½ è¦é—®æˆ‘æ€ä¹ˆå‘ç°è¿™ä¸€ç‚¹çš„å‘¢ï¼Œæˆ‘å½“æ—¶æ²¡æœ‰æ€è·¯ï¼Œç„¶åéšæ‰‹è¾“å‡ºäº† <span class=\"math inline\">\\(n=100\\)</span> æ—¶ <span class=\"math inline\">\\(n\\bmod i\\)</span> çš„æ‰€æœ‰å€¼ã€‚ç„¶åå‘ç° <span class=\"math inline\">\\(k=51\\)</span> æ—¶ä½™æ•°æ˜¯ <span class=\"math inline\">\\(49\\)</span>â€¦â€¦ ç„¶åå°±ä¼šäº†ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>#define int long long\nnamespace XSC062 &#123;\nusing namespace fastIO;\nint n, k;\nint main() &#123;\n    read(n), k = n / 2 + 1;\n    print(k * (n % k));\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n<p><del>å¤´ä¸€æ¬¡åœ¨é¢˜è§£é‡Œè´´è¿™ä¹ˆçŸ­çš„ä»£ç </del></p>\n</details>\n<hr />\n<h3 id=\"b.-æå–æ•°å­—\">B. æå–æ•°å­—</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4272/problem/2\" class=\"uri\">http://222.180.160.110:61235/contest/4272/problem/2</a></p>\n<p>æˆ‘è¢«è¿™é“é¢˜ï¼ˆç–‘ä¼¼ T1ï¼‰å‘åˆ°äº†ï¼äº¤äº†ä¸‰éæ‰è¿‡ï¼è¿™åˆç†å—ï¼Ÿ</p>\n<p>é¦–å…ˆè¦å¼€ <code>long long</code>ï¼ç„¶åæ³¨æ„ï¼Œä½ çš„åˆ¤å®šæ¡ä»¶åº”ä¸ºã€Œå½“å‰æ˜¯å¦å·²å­˜å‚¨æ•°ã€è€Œéã€Œå½“å‰å­˜æ•°å˜é‡æ˜¯å¦ä¸º 0ã€ï¼å› ä¸ºæ•°æ®ä¸­ä¼šæœ‰å•ä¸ª 0 çš„æƒ…å†µå‡ºç°ï¼</p>\n<p>ç„¶åå°±æ²¡æœ‰äº†ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>#define int long long\nnamespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxn = 1e5 + 5;\nbool flag;\nchar s[maxn]; \nint n, ans, cnt;\nint main() &#123;\n    scanf(&quot;%*s %s&quot;, s + 1);\n    n = strlen(s + 1);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        if (s[i] &gt;= &#39;0&#39; &amp;&amp; s[i] &lt;= &#39;9&#39;)\n            cnt = cnt * 10 + s[i] - &#39;0&#39;, flag = 1;\n        else if (flag)\n            ans += (cnt + 5), cnt = 0, flag = 0;\n    &#125;\n    if (flag) ans += (cnt + 5);\n    print(ans, &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n</details>\n<hr />\n<h3 id=\"c.-æ­¦å™¨é€‰æ‹©\">C. æ­¦å™¨é€‰æ‹©</h3>\n<p><a href=\"http://222.180.160.110:61235/contest/4272/problem/3\" class=\"uri\">http://222.180.160.110:61235/contest/4272/problem/3</a></p>\n<details>\n<p><summary>é¦–å…ˆæ˜¯æˆ‘æƒ³äº†åŠä¸ªå°æ—¶çš„ç‹‚æ‹½é…·ç‚«åŠç‚¸å¤©çš„æ³•ä¸€ï¼šç¦»çº¿</summary></p>\n<p>æˆ‘å½“æ—¶ä¸€è¾¹æ‰“ä¸€è¾¹æ€€ç–‘ç°åœ¨çš„æ™®åŠç»„æ˜¯ä»€ä¹ˆç¥ä»™ï¼ŒT3 è€ƒè¿™ä¹ˆç¥å¥‡çš„ç¦»çº¿ï¼Œéš¾é“æ˜¯æˆ‘è½åäºæ—¶ä»£äº†ï¼Ÿ</p>\n<p>ï¼ˆä¹‹æ‰€ä»¥è®¤ä¸ºè¿™æ˜¯ T3 æ˜¯å› ä¸ºæ‹¬å·é‚£é“é¢˜ç¡®å®æ˜¯æ­£å¸¸ T4 é£æ ¼ï¼‰</p>\n<p>æˆ‘ä»¬é¢„å¤„ç†å‡ºå¯¹äºæ¯ä¸€ä¸ªå¯èƒ½è·å¾—æ­¦å™¨ <span class=\"math inline\">\\(i\\)</span> çš„ä½ç½®ï¼Œåº”è¯¥ä»å“ªä¸ªä½ç½®ç¬¬ä¸€æ¬¡æ¡åˆ°æ­¦å™¨ <span class=\"math inline\">\\(i\\)</span>ï¼Œç”±äºè¿™ä¸€æ®µå†…çš„æ‰€æœ‰æ­¦å™¨ <span class=\"math inline\">\\(i\\)</span> éƒ½éœ€è¦è¢«æ‹¾å–ï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸ºåŒºé—´ <span class=\"math inline\">\\([L_i, R_i]\\)</span> æ¥è®°å½•ã€‚</p>\n<p>é‚£ä¹ˆè¯¢é—®å¯ä»¥è½¬åŒ–ä¸ºï¼Œåœ¨ <span class=\"math inline\">\\([l, r]\\)</span> å†… <strong>ä¸åŒé¢œè‰²</strong> <span class=\"math inline\">\\([L_i, R_i]\\)</span> çš„æ•°é‡ã€‚</p>\n<p>è€ƒè™‘å°†è¯¢é—®ç¦»çº¿ã€‚å°†è¯¢é—®æŒ‰å·¦ç«¯ç‚¹ä»å¤§åˆ°å°æ’åºï¼Œä¿¡æ¯åŒºé—´ <span class=\"math inline\">\\([L_i, R_i]\\)</span> ä¹ŸæŒ‰å·¦ç«¯ç‚¹ä»å¤§åˆ°å°æ’åºã€‚</p>\n<p>å¯¹äºæ¯æ¬¡è¯¢é—® <span class=\"math inline\">\\(l, r\\)</span>ï¼Œåœ¨æ ‘çŠ¶æ•°ç»„ä¸­å°†è¢« <span class=\"math inline\">\\([l, n]\\)</span> å®Œå…¨åŒ…å«çš„æ‰€æœ‰ <span class=\"math inline\">\\([L_i, R_i]\\)</span>ï¼ˆå…¶å®å°±æ˜¯ <span class=\"math inline\">\\(l\\le L_i\\)</span> çš„æ‰€æœ‰ <span class=\"math inline\">\\(L_i\\)</span>ï¼‰åœ¨å³ç«¯ç‚¹ <span class=\"math inline\">\\(R_i\\)</span> å¤„åŠ ä¸€ï¼Œæˆ‘ä»¬å°±ç»Ÿè®¡åˆ°äº†å¯ä»¥æ¡åˆ°æ­¦å™¨çš„æ‰€æœ‰ä½ç½®ã€‚</p>\n<p>æ€ä¹ˆåŒºåˆ†é¢œè‰²å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬è®©æ¯ä¸ªé¢œè‰²åªè¢«ç®—ä¸€æ¬¡ã€‚ç®—å“ªä¸€æ¬¡å‘¢ï¼Ÿå°±ç®—å½“å‰å·²åŠ å…¥çš„ <span class=\"math inline\">\\([L_i, R_i]\\)</span> å†…ï¼Œæ¯”é€‰ä¸­æ¦‚ç‡æœ€å¤§çš„ä¸€æ¬¡ã€‚</p>\n<p>æˆ‘ä»¬æ ‘çŠ¶æ•°ç»„ç»Ÿè®¡çš„æ˜¯ <span class=\"math inline\">\\([1, r]\\)</span> å†…çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®©æ¦‚ç‡æœ€å¤§çš„è¯ï¼Œå°±è¦è®© <span class=\"math inline\">\\(R_i\\)</span> å°½é‡çš„å°ã€‚</p>\n<p>æˆ‘ä»¬è®°å½•æ¯ä¸ªé¢œè‰²å½“å‰åˆæ³• <span class=\"math inline\">\\([L_i, R_i]\\)</span> çš„æœ€å°å³ç«¯ç‚¹ <span class=\"math inline\">\\(\\min_R\\)</span>ã€‚åŠ å…¥ä¸€ä¸ªæ–°çš„ <span class=\"math inline\">\\([L_i, R_i]\\)</span> æ—¶ï¼Œå¦‚æœ <span class=\"math inline\">\\(R_i\\ge \\min_R\\)</span>ï¼Œé‚£ä¹ˆä¸ä¼šäº§ç”Ÿå½±å“ï¼Œè·³è¿‡ï¼›å¦åˆ™ï¼Œå½“ <span class=\"math inline\">\\(R_i&lt;\\min_R\\)</span> æ—¶ï¼Œæˆ‘ä»¬å°±è¦å…ˆæ¶ˆé™¤å½“å‰ <span class=\"math inline\">\\(\\min_R\\)</span> çš„å½±å“ï¼ˆå³åœ¨æ ‘çŠ¶æ•°ç»„ä¸­å°†è¯¥ä½ç½®åŠ ä¸Šçš„ 1 å‡å»ï¼‰ï¼Œå†åŠ ä¸Š <span class=\"math inline\">\\(R_i\\)</span> çš„å½±å“ï¼ˆå³åœ¨æ ‘çŠ¶æ•°ç»„ä¸­åŠ ä¸Šè¯¥ä½ç½®çš„ 1ï¼‰ã€‚</p>\n<p>æ­¤æ—¶æˆ‘ä»¬å¯¹ <span class=\"math inline\">\\([1, r]\\)</span> çš„è¯¢é—®å°±æ˜¯ç­”æ¡ˆã€‚</p>\n<p>å¤æ‚åº¦ <span class=\"math inline\">\\(O(n\\log n + m\\log m + m\\log n)\\)</span>ï¼Œå…¶ä¸­ <span class=\"math inline\">\\(n\\log n\\)</span> æ¥è‡ªäºå¯¹ <span class=\"math inline\">\\([L_i, R_i]\\)</span> çš„æ’åºï¼Œ<span class=\"math inline\">\\(m\\log m\\)</span> æ¥è‡ªäºå¯¹è¯¢é—®çš„æ’åºï¼Œ<span class=\"math inline\">\\(m\\log n\\)</span> æ¥è‡ªäºç¦»çº¿æ ‘çŠ¶æ•°ç»„ã€‚</p>\n</details>\n<p>æ¥ä¸‹æ¥è®²é¢˜è§£ç»™çš„æ­£è§£â€¦â€¦ è¿™ä¸ªæ˜¯çœŸçš„å¦™ã€‚</p>\n<p>è€ƒè™‘æ‰€æœ‰ç§ç±»æ•°ï¼Œåœ¨ <span class=\"math inline\">\\(n\\)</span> ä¸ªæ•°å†…æ»¡è¶³æ¡ä»¶çš„ç§ç±» <span class=\"math inline\">\\(x\\)</span> æœ€ä¼˜æ¡ä»¶ä¸‹ä¹Ÿä¸è¿‡ <span class=\"math inline\">\\(\\dfrac {x\\times (x+1)}2=n\\)</span>ï¼Œæ‰€ä»¥æ»¡è¶³æ¡ä»¶æ­¦å™¨çš„æ•°é‡æœ€å¤šåªæœ‰ <span class=\"math inline\">\\(\\sqrt n\\)</span> çº§åˆ«ã€‚</p>\n<p>æ‰€ä»¥æˆ‘ä»¬å¯¹æ‰€æœ‰åˆæ³•ç§ç±»åšå‰ç¼€å’Œï¼Œæ¯æ¬¡è¯¢é—®æ£€æŸ¥æ‰€æœ‰åˆæ³•ç§ç±»æ˜¯å¦åœ¨è¯¥åŒºé—´å†…å‡ºç°å¯¹åº”æ¬¡æ•°ï¼Œç„¶åç»Ÿè®¡ç­”æ¡ˆã€‚å¤æ‚åº¦ <span class=\"math inline\">\\(O(m\\sqrt n + n\\sqrt n)\\)</span>ã€‚<span class=\"math inline\">\\(n\\sqrt n\\)</span> æ˜¯å‰é¢å‰ç¼€å’Œæ¥çš„ï¼Œ<span class=\"math inline\">\\(m\\sqrt n\\)</span> æ˜¯æš´åŠ›ç»Ÿè®¡æ¥çš„ã€‚</p>\n<p>ä½†æ˜¯æ ¹å·å¯è€»ï¼Œæ‰€ä»¥æˆ‘çš„æ³•ä¸€æ›´ NBï¼ï¼ï¼ğŸ¤¡ğŸ¤¡ğŸ¤¡</p>\n<details>\n<p><summary>ç‹‚æ‹½é…·ç‚«åŠç‚¸å¤©çš„æ³•ä¸€ä»£ç </summary></p>\n<pre class=\"cpp\"><code>#define int long long\nnamespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxn = 1e5 + 5;\nstruct _ &#123;\n    int l, r, k, i;\n    bool operator&lt; (const _ &amp;q) const &#123;\n        return l &lt; q.l;\n    &#125;\n&#125;;\nstruct __ &#123;\n    int l, r, nxt, x;\n    bool operator&lt; (const __ &amp;q) const &#123;\n        return l &lt; q.l;\n    &#125;\n&#125;;\n_ q[maxn];\n__ a[maxn];\nstd::map&lt;int, int&gt; t;\nstd::vector&lt;int&gt; u[maxn];\nint ans[maxn], now[maxn];\nint mnr[maxn], Bit[maxn];\nint n, m, tot, x, cnt, pos;\nint lowbit(int x) &#123; return x &amp; -x; &#125;\nvoid add(int x, int v) &#123;\n    for (int i = x; i &lt;= n; i += lowbit(i))\n        Bit[i] += v;\n    return;\n&#125;\nint ask(int x) &#123;\n    int res = 0;\n    for (int i = x; i; i -= lowbit(i))\n        res += Bit[i];\n    return res;\n&#125;\nint calc(int x, int k) &#123;\n    int res = 1;\n    for (int i = 1; i &lt;= k; ++i)\n        res *= x--;\n    for (int i = 1; i &lt;= k; ++i)\n        res /= i;\n    return res;\n&#125;\nint main() &#123;\n    read(n);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        read(x);\n        if (!t.count(x)) t[x] = ++tot;\n        int id = t[x];\n        u[id].push_back(i);\n        if ((int)u[id].size() &gt;= x) &#123;\n            a[++cnt].l = u[id][(int)u[id].size() - x];\n            a[cnt].r = i, a[now[id]].nxt = cnt;\n            a[cnt].x = x, mnr[x] = n + 1;\n            now[id] = cnt;\n        &#125;\n    &#125;\n    read(m);\n    for (int i = 1; i &lt;= m; ++i) &#123;\n        read(q[i].l), read(q[i].r);\n        read(q[i].k), q[i].i = i;\n    &#125;\n    std::sort(q + 1, q + m + 1);\n    std::sort(a + 1, a + cnt + 1);\n    pos = cnt;\n    for (int i = m; i; --i) &#123;\n        while (a[pos].l &gt;= q[i].l) &#123;\n            if (a[pos].r &lt; mnr[a[pos].x]) &#123;\n                if (mnr[a[pos].x] &lt;= n)\n                    add(mnr[a[pos].x], -1);\n                add(a[pos].r, 1);\n                mnr[a[pos].x] = a[pos].r;\n            &#125;\n            --pos;\n        &#125;\n        ans[q[i].i] = calc(ask(q[i].r), q[i].k);\n    &#125;\n    for (int i = 1; i &lt;= m; ++i)\n        print(ans[i], &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n<p>æˆ‘ç”šè‡³æ‰“å®Œäº†å°±è¿‡äº†æ ·ä¾‹ç„¶åç›´æ¥å°± A äº†ï¼Œå¥½ä¹…æ²¡æœ‰è¿™ä¹ˆçˆ½åœ°è¿‡è¿‡è¿™ç§å¤§ç é‡ <del>æ­£ç¡®æ€§è¿˜æœªçŸ¥</del> çš„é¢˜äº†ã€‚</p>\n</details>\n<p>è€Œä¸”æˆ‘ç›¸ä¿¡å…¨åœºåªæœ‰æˆ‘ä¸€ä¸ª <del>å°ä¸‘</del> å¸…å“¥æ‰“ç¦»çº¿ï¼Œæ‰€ä»¥æˆ‘æ˜¯æœ€å¼ºçš„ï¼ï¼ï¼ğŸ¤¡ğŸ¤¡ğŸ¤¡</p>\n<details>\n<p><summary>ç»å¯¹ä¸å¦‚æ³•ä¸€çš„æ³•äºŒä»£ç </summary></p>\n<pre class=\"cpp\"><code>#define int long long\nnamespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxm = 505;\nconst int maxn = 1e5 + 5;\nint a[maxn];\nint cnt[maxn];\nint sum[maxm][maxn];\nint n, tot, m, l, r, k, res;\nint calc(int x, int k) &#123;\n    int res = 1;\n    for (int i = 1; i &lt;= k; ++i)\n        res *= x--;\n    for (int i = 1; i &lt;= k; ++i)\n        res /= i;\n    return res;\n&#125;\nint main() &#123;\n    read(n);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        read(a[i]);\n        if (a[i] &lt;= n) ++cnt[a[i]];\n    &#125;\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        if (cnt[i] &gt;= i) &#123;\n            sum[++tot][n + 1] = i;\n            for (int j = 1; j &lt;= n; ++j)\n                sum[tot][j] = sum[tot][j - 1] + (a[j] == i);\n        &#125;\n    &#125;\n    read(m);\n    while (m--) &#123;\n        read(l), read(r), read(k);\n        res = 0;\n        for (int i = 1; i &lt;= tot; ++i)\n            res += (sum[i][r] - sum[i][l - 1] &gt;= sum[i][n + 1]);\n        print(calc(res, k), &#39;\\n&#39;);\n    &#125;\n    return 0;\n&#125;\n&#125; // namespace XSC062\n#undef int</code></pre>\n</details>\n<hr />\n<h3 id=\"d.-æ‹¬å·åºåˆ—\">D. æ‹¬å·åºåˆ—</h3>\n<p>http://222.180.160.110:61235/contest/4272/problem/4</p>\n<p>å‘ƒå‘ƒå‘ƒï¼Œè¿™ï¼Œæœ‰ä»€ä¹ˆå¥½è®²çš„å—ï¼Ÿåšè¿‡åŸé¢˜çš„åº”è¯¥éƒ½ä¼šå§â€¦â€¦</p>\n<p>åæ­£å°±æ˜¯ä¸ªæ¯”è¾ƒè£¸çš„åŒºé—´ DPï¼Œè½¬ç§»çš„æ—¶å€™æ³¨æ„ä¸€ä¸‹ç©¶ç«Ÿå“ªäº›æ˜¯åŒä¸€å¯¹æ‹¬å·ï¼Œå“ªäº›æ˜¯ç›¸é‚»æ‹¬å·å°±å¥½ã€‚</p>\n<p>å¤æ‚åº¦ <span class=\"math inline\">\\(O(n^2)\\)</span>ã€‚</p>\n<details>\n<pre class=\"cpp\"><code>namespace XSC062 &#123;\nusing namespace fastIO;\nconst int maxn = 1e3 + 5;\nint n, res;\nchar s[maxn];\nstd::stack&lt;int&gt; t;\nint mat[maxn], c[5];\nint f[maxn][maxn][3][3];\nint max(int x, int y) &#123; return x &gt; y ? x : y; &#125;\nvoid upd(int &amp;x, int y) &#123; x = max(x, y); return; &#125;\nint main() &#123;\n    memset(f, -0x3f, sizeof (f));\n    scanf(&quot;%d %d %d&quot;, &amp;n, &amp;c[1], &amp;c[2]);\n    scanf(&quot;%s&quot;, s + 1);\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        if (s[i] == &#39;(&#39;) t.push(i);\n        else mat[t.top()] = i, t.pop();\n    &#125;\n    for (int i = 1; i &lt;= n; ++i) &#123;\n        if (mat[i] == i + 1) &#123;\n            for (int k = 0; k &lt;= 2; ++k)\n                f[i][i + 1][k][k] = c[k];\n        &#125;\n    &#125;\n    for (int l = 4; l &lt;= n; l += 2) &#123;\n        for (int i = 1; i &lt;= n - l + 1; ++i) &#123;\n            int j = i + l - 1;\n            if (mat[i] == j) &#123;\n                // ((...))\n                // xy...zx\n                for (int x = 0; x &lt;= 2; ++x) &#123;\n                    for (int y = 0; y &lt;= 2; ++y) &#123;\n                        if (y == x) continue;\n                        for (int z = 0; z &lt;= 2; ++z) &#123;\n                            if (z == x) continue;\n                            upd(f[i][j][x][x], f[i + 1][j - 1][y][z] + c[x]);\n                        &#125;\n                    &#125;\n                &#125;\n            &#125;\n            else &#123;\n                // ()(...)\n                // xxy...z\n                for (int x = 0; x &lt;= 2; ++x) &#123;\n                    for (int y = 0; y &lt;= 2; ++y) &#123;\n                        if (y == x) continue;\n                        for (int z = 0; z &lt;= 2; ++z)\n                            upd(f[i][j][x][z], f[i][mat[i]][x][x] + f[mat[i] + 1][j][y][z]);\n                    &#125;\n                &#125;\n            &#125;\n        &#125;\n    &#125;\n    for (int i = 0; i &lt;= 2; ++i) &#123;\n        for (int j = 0; j &lt;= 2; ++j)\n            res = max(res, f[1][n][i][j]);\n    &#125;\n    print(res, &#39;\\n&#39;);\n    return 0;\n&#125;\n&#125; // namespace XSC062</code></pre>\n</details>\n",
            "tags": [
                "æ ‘çŠ¶æ•°ç»„",
                "åŒºé—´ DP"
            ]
        }
    ]
}