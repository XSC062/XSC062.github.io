<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://xsc062.netlify.app</id>
    <title> â€¢ Posts by &#34;æ•°å­¦&#34; tag</title>
    <link href="https://xsc062.netlify.app" />
    <updated>2025-04-19T02:03:57.000Z</updated>
    <category term="æ‚¬çº¿æ³•" />
    <category term="æ–œç‡ä¼˜åŒ–" />
    <category term="å¹¶æŸ¥é›†" />
    <category term="å“ˆå¸Œ" />
    <category term="DP" />
    <category term="å•è°ƒé˜Ÿåˆ—" />
    <category term="å­—å…¸æ ‘" />
    <category term="äºŒåˆ†å›¾" />
    <category term="åˆ†æ²»" />
    <category term="è®¡æ•°" />
    <category term="å®¹æ–¥" />
    <category term="CRT / exCRT" />
    <category term="æ’åˆ—ç»„åˆ" />
    <category term="ç½‘ç»œæµ" />
    <category term="äºŒåˆ†" />
    <category term="å®¹æ–¥åŸç†" />
    <category term="çº¿æ®µæ ‘" />
    <category term="æ ‘çŠ¶æ•°ç»„" />
    <category term="åŒºé—´ DP" />
    <category term="æ•°æ®ç»“æ„" />
    <category term="æ„é€ " />
    <category term="Tarjan" />
    <category term="ä¸‹é¥­" />
    <category term="æè¶…çº¿æ®µæ ‘" />
    <category term="æ ‘é“¾å‰–åˆ†" />
    <category term="LCA" />
    <category term="å€å¢" />
    <category term="é¸½å·¢åŸç†" />
    <category term="æ•°å­¦" />
    <category term="è°ƒå’Œçº§æ•°" />
    <category term="å·®åˆ†" />
    <category term="æ€ç»´" />
    <category term="æ ‘å½¢ DP" />
    <category term="æœ€å°ç”Ÿæˆæ ‘" />
    <category term="SAM" />
    <category term="çŠ¶å‹" />
    <category term="åˆ†å—" />
    <category term="å¯æŒä¹…åŒ–" />
    <category term="ç¬›å¡å°”æ ‘" />
    <category term="é«˜ç»´å‰ç¼€å’Œ" />
    <category term="é—²è¯" />
    <category term="æ¬§æ‹‰å›è·¯" />
    <category term="é•¿é“¾å‰–åˆ†" />
    <category term="KMP" />
    <category term="border" />
    <category term="éšæœºåŒ–" />
    <category term="å­—ç¬¦ä¸²" />
    <category term="AC è‡ªåŠ¨æœº" />
    <category term="SA" />
    <category term="æ ‘ä¸Šå·®åˆ†" />
    <category term="FWT" />
    <category term="å †" />
    <category term="æ ‘çš„é‡å¿ƒ" />
    <category term="è´ªå¿ƒ" />
    <category term="å‡æ‘Š" />
    <category term="åæ‚”è´ªå¿ƒ" />
    <category term="ä¼˜åŒ–å»ºå›¾" />
    <category term="è°ƒæ•´æ³•" />
    <category term="åšå¼ˆè®º" />
    <category term="DP ä¼˜åŒ–" />
    <category term="è™šæ ‘" />
    <category term="ç‚¹åˆ†æ²»" />
    <category term="å››è¾¹å½¢ä¸ç­‰å¼" />
    <category term="èƒŒåŒ…" />
    <category term="æ”¯é…å¯¹" />
    <category term="DDP" />
    <category term="CDQ åˆ†æ²»" />
    <category term="çŒ«æ ‘" />
    <category term="DP å¥— DP" />
    <category term="Kruskal é‡æ„æ ‘" />
    <category term="é«˜ç²¾åº¦" />
    <category term="æœ€çŸ­è·¯" />
    <category term="æ ‘å¥—æ ‘" />
    <category term="äºŒé¡¹å¼åæ¼”" />
    <category term="æœç´¢" />
    <entry>
        <id>https://xsc062.netlify.app/20250419/</id>
        <title>æ‚é¢˜é€‰è°ˆï¼šç½‘æ ¼å›¾è·¯å¾„è®¡æ•°</title>
        <link rel="alternate" href="https://xsc062.netlify.app/20250419/"/>
        <content type="html">&lt;figure&gt;
&lt;img src=&#34;/20250419/neko.jpeg&#34; alt=&#34;çŒ«&#34; style=&#34;width: 75px&#34;&gt;
&lt;figcaption&gt;
çŒ«
&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ç‚¹åˆ°ç‚¹çš„æ–¹æ¡ˆæ•°&#34;&gt;ç‚¹åˆ°ç‚¹çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;p&gt;ä» &lt;span class=&#34;math inline&#34;&gt;\((x_1,y_1)\)&lt;/span&gt; åªèƒ½å‘å³ã€å‘ä¸‹èµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\((x_2,y_2)\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ï¼š&lt;span class=&#34;math inline&#34;&gt;\(C_{x_2-x_1+y_2-y_1}^{x_2-x_1}\)&lt;/span&gt;ã€‚å°±æ˜¯è¯´ï¼Œå› ä¸ºå¿…é¡»å‘ä¸‹èµ° &lt;span class=&#34;math inline&#34;&gt;\(x_2-x_1\)&lt;/span&gt; æ­¥ï¼Œåˆå¿…é¡»å‘å³èµ° &lt;span class=&#34;math inline&#34;&gt;\(y_2-y_1\)&lt;/span&gt; æ­¥ï¼›ä½†é¡ºåºæ˜¯å¯ä»¥ä»»æ„æ‰“ä¹±çš„ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;a---gerald-and-giant-chess&#34;&gt;A - Gerald and Giant Chess&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://codeforces.com/problemset/problem/560/E&#34; class=&#34;uri&#34;&gt;https://codeforces.com/problemset/problem/560/E&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æŠŠä¸èƒ½èµ°çš„ç‚¹æŒ‰ &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; ä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\(y\)&lt;/span&gt; ä¸ºç¬¬äºŒå…³é”®å­—æ’åºï¼Œå°±å¯ä»¥å¾—åˆ°å®ƒä»¬æŒ‰å¤§è‡´æ‹“æ‰‘åºæ’åˆ—çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä»¤ &lt;span class=&#34;math inline&#34;&gt;\(f_i\)&lt;/span&gt; è¡¨ç¤ºä¸ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(1\sim i-1\)&lt;/span&gt; çš„éæ³•ç‚¹èµ°åˆ°ç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; ä¸ªéæ³•ç‚¹çš„æ–¹æ¡ˆæ•°ï¼Œå°±å¯ä»¥å¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(f_i=C_{x_i+y_i,x_i}-\sum_{j=1}^{i-1} f_j\times C_{x_i-x_j+y_i-y_j}^{x_i-x_j}\)&lt;/span&gt;ã€‚å¯ä»¥å‘ç°åé¢å‡å»çš„æ–¹æ¡ˆï¼Œå› ä¸ºç¢°åˆ°çš„ç¬¬ä¸€ä¸ªéæ³•ç‚¹ä¸åŒï¼Œæ‰€ä»¥æ˜¯ä¸¤ä¸¤ä¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;è®© &lt;span class=&#34;math inline&#34;&gt;\((h,w)\)&lt;/span&gt; æˆä¸ºç¬¬ &lt;span class=&#34;math inline&#34;&gt;\((n+1)\)&lt;/span&gt; ä¸ªéæ³•ç‚¹ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\(f_{n+1}\)&lt;/span&gt; å°±æ˜¯ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int mod = 1e9 + 7;
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&amp;quot;.in&amp;quot;, &amp;quot;r&amp;quot;, stdin);
    std::freopen(&amp;quot;.out&amp;quot;, &amp;quot;w&amp;quot;, stdout);
#endif
    int h, w, n;
    std::cin &amp;gt;&amp;gt; h &amp;gt;&amp;gt; w &amp;gt;&amp;gt; n, --h, --w;
    std::vector&amp;lt;std::pair&amp;lt;int, int&amp;gt; &amp;gt; a(n + 2);
    for (int i = 1; i &amp;lt;= n; ++i) &amp;#123;
        std::cin &amp;gt;&amp;gt; a[i].first &amp;gt;&amp;gt; a[i].second;
        --a[i].first, --a[i].second;
    &amp;#125;
    a[n + 1] = &amp;#123; h, w &amp;#125;;
    std::sort(a.begin() + 1, a.end());
    std::vector&amp;lt;long long&amp;gt; fac(h + w + 1), inv(h + w + 1);
    fac[0] = inv[0] = 1ll;
    for (int i = 1; i &amp;lt;= h + w; ++i)
        fac[i] = fac[i - 1] * i % mod;
    auto qkp = [](long long x, int y) &amp;#123;
        auto res = 1ll;
        for (; y; (x *= x) %= mod, y &amp;gt;&amp;gt;= 1)
            if (y &amp;amp; 1)
                (res *= x) %= mod;
        return res;
    &amp;#125;;
    inv[h + w] = qkp(fac[h + w], mod - 2);
    for (int i = h + w - 1; i; --i)
        inv[i] = inv[i + 1] * (i + 1) % mod;
    auto C = [&amp;amp;](int n, int m) &amp;#123;
        return fac[n] * inv[n - m] % mod * inv[m] % mod;
    &amp;#125;;
    std::vector&amp;lt;long long&amp;gt; f(n + 2);
    for (int i = 1; i &amp;lt;= n + 1; ++i) &amp;#123;
        f[i] = C(a[i].first + a[i].second, a[i].first);
        for (int j = 1; j &amp;lt; i; ++j)
            if (a[j].second &amp;lt;= a[i].second)
                (f[i] += mod - f[j] * C(a[i].first - a[j].first + a[i].second - a[j].second, a[i].first - a[j].first) % mod) %= mod;
        // printf(&amp;quot;f[(%d, %d)] = %lld\n&amp;quot;, a[i].first, a[i].second, f[i]);
    &amp;#125;
    std::cout &amp;lt;&amp;lt; f[n + 1] &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;b---bbq-hard&#34;&gt;B - BBQ Hard&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://atcoder.jp/contests/agc001/tasks/agc001_e&#34; class=&#34;uri&#34;&gt;https://atcoder.jp/contests/agc001/tasks/agc001_e&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸ä»…ä»…å¯ä»¥åœ¨å…³é”®ç‚¹ä¸Š DPï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘æ ¼ä¸Šç›´æ¥ DPã€‚&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math inline&#34;&gt;\(A_i+B_i+A_j+B_j\)&lt;/span&gt; å°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(A_i+B_i-(-A_j)-(-B_j)\)&lt;/span&gt;ã€‚æŠŠæ£‹ç›˜æ‰©å¤§åˆ° &lt;span class=&#34;math inline&#34;&gt;\(-2000\to 2000\)&lt;/span&gt; å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;è®¾ &lt;span class=&#34;math inline&#34;&gt;\(f_{i,j}\)&lt;/span&gt; è¡¨ç¤ºå¯ä»¥åˆ°è¾¾ &lt;span class=&#34;math inline&#34;&gt;\((i,j)\)&lt;/span&gt; çš„æ‰€æœ‰å‘å‡ºå…³é”®ç‚¹ &lt;span class=&#34;math inline&#34;&gt;\((-A_j,-B_j)\)&lt;/span&gt; å¸¦æ¥çš„è´¡çŒ®ï¼Œé‚£ä¹ˆ &lt;span class=&#34;math inline&#34;&gt;\(f_{i,j}=f_{i-1,j}+f_{i,j-1}\)&lt;/span&gt;ã€‚æšä¸¾æ‰€æœ‰æ¥æ”¶å…³é”®ç‚¹ &lt;span class=&#34;math inline&#34;&gt;\((A_i,B_i)\)&lt;/span&gt;ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\(\sum f_{A_i,B_i}\)&lt;/span&gt; å°±æ˜¯ç­”æ¡ˆçš„ä¸¤å€ï¼Œå†å‡å»å¯¹è§’çº¿ï¼Œä¹Ÿå°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(\sum (-A_i,B_i)\to (A_i,B_i)\)&lt;/span&gt; åçš„å€¼ã€‚&lt;/p&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int N = 2000;
const int mod = 1e9 + 7;
const int inv2 = 500000004;
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&amp;quot;.in&amp;quot;, &amp;quot;r&amp;quot;, stdin);
    std::freopen(&amp;quot;.out&amp;quot;, &amp;quot;w&amp;quot;, stdout);
#endif
    int n;
    std::cin &amp;gt;&amp;gt; n;
    std::vector&amp;lt;long long&amp;gt; fac(4 * N + 1), inv(4 * N + 1);
    fac[0] = inv[0] = 1ll;
    for (int i = 1; i &amp;lt;= 4 * N; ++i)
        fac[i] = fac[i - 1] * i % mod;
    auto qkp = [](long long x, int y) &amp;#123;
        auto res(1ll);
        for (; y; (x *= x) %= mod, y &amp;gt;&amp;gt;= 1)
            if (y &amp;amp; 1)
                (res *= x) %= mod;
        return res;
    &amp;#125;;
    inv[4 * N] = qkp(fac[4 * N], mod - 2);
    for (int i = 4 * N - 1; i; --i)
        inv[i] = inv[i + 1] * (i + 1) % mod;
    std::vector&amp;lt;std::pair&amp;lt;int, int&amp;gt; &amp;gt; a(n + 1);
    std::vector&amp;lt;std::vector&amp;lt;long long&amp;gt; &amp;gt; f(2 * N + 1, std::vector&amp;lt;long long&amp;gt; (2 * N + 1));
    for (int i = 1; i &amp;lt;= n; ++i) &amp;#123;
        std::cin &amp;gt;&amp;gt; a[i].first &amp;gt;&amp;gt; a[i].second;
        ++f[N - a[i].first][N - a[i].second];
    &amp;#125;
    for (int i = 0; i &amp;lt;= 2 * N; ++i)
        for (int j = 0; j &amp;lt;= 2 * N; ++j) &amp;#123;
            if (i &amp;gt;= 1)
                (f[i][j] += f[i - 1][j]) %= mod;
            if (j &amp;gt;= 1)
                (f[i][j] += f[i][j - 1]) %= mod;
            // printf(&amp;quot;f(%2d, %2d) = %lld\n&amp;quot;, i - N, j - N, f[i][j]);
        &amp;#125;
    long long res = 0ll;
    auto C = [&amp;amp;](int n, int m) &amp;#123;
        return fac[n] * inv[n - m] % mod * inv[m] % mod;
    &amp;#125;;
    for (int i = 1; i &amp;lt;= n; ++i) &amp;#123;
        (res += f[a[i].first + N][a[i].second + N]) %= mod;
        (res += mod - C(a[i].first * 2 + a[i].second * 2, 2 * a[i].first)) %= mod;
    &amp;#125;
    std::cout &amp;lt;&amp;lt; res * inv2 % mod &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;c---iroha-and-a-grid&#34;&gt;C - Iroha and a Grid&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://atcoder.jp/contests/arc058/tasks/arc058_b&#34; class=&#34;uri&#34;&gt;https://atcoder.jp/contests/arc058/tasks/arc058_b&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…ˆæŠŠç»¿è‰²éƒ¨åˆ†çš„ç­”æ¡ˆè®¡ç®—å‡ºæ¥ï¼š&lt;/p&gt;
&lt;figure&gt;
&lt;img src=&#34;1.png&#34; alt=&#34;ç½‘æ ¼&#34; /&gt;&lt;figcaption&gt;ç½‘æ ¼&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;å¦‚æœæŠŠç»¿è‰²çš„æ¯ä¸€ä¸ªæ ¼å­åˆ°ç»ˆç‚¹çš„æ–¹æ¡ˆæ•°æ±‚å’Œï¼Œå°±ä¼šç®—é‡ï¼Œå› ä¸ºä¸Šé¢çš„ç»¿è‰²ç‚¹å¯ä»¥èµ°åˆ°ä¸‹é¢çš„ç»¿è‰²ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è®©ç»¿è‰²ç‚¹ç¬¬ä¸€æ­¥åªèƒ½å¾€å³èµ°åˆ°é»„è‰²ç‚¹ï¼Œç”¨è¿™æ ·çš„æ–¹æ¡ˆä¸ºé»„è‰²ç‚¹èµ‹åˆå€¼ï¼Œå†è®©é»„è‰²ç‚¹è‡ªç”±èµ°å°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int mod = 1e9 + 7;
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&amp;quot;.in&amp;quot;, &amp;quot;r&amp;quot;, stdin);
    std::freopen(&amp;quot;.out&amp;quot;, &amp;quot;w&amp;quot;, stdout);
#endif
    int h, w, a, b;
    std::cin &amp;gt;&amp;gt; h &amp;gt;&amp;gt; w &amp;gt;&amp;gt; a &amp;gt;&amp;gt; b;
    std::vector&amp;lt;long long&amp;gt; fac(h + w + 1), inv(h + w + 1);
    fac[0] = inv[0] = 1ll;
    for (int i = 1; i &amp;lt;= h + w; ++i)
        fac[i] = fac[i - 1] * i % mod;
    auto qkp = [](long long x, int y) &amp;#123;
        auto res(1ll);
        for (; y; (x *= x) %= mod, y &amp;gt;&amp;gt;= 1)
            if (y &amp;amp; 1)
                (res *= x) %= mod;
        return res;
    &amp;#125;;
    inv[h + w] = qkp(fac[h + w], mod - 2);
    for (int i = h + w - 1; i; --i)
        inv[i] = inv[i + 1] * (i + 1) % mod;
    auto C = [&amp;amp;](int n, int m) &amp;#123;
        return fac[n] * inv[n - m] % mod * inv[m] % mod;
    &amp;#125;;
    auto res = 0ll;
    for (int i = 1; i &amp;lt;= h - a; ++i) &amp;#123;
        // (i, B)
        auto f(C(i + b - 2, i - 1));
        // printf(&amp;quot;(%d, %d): %lld\n&amp;quot;, i, b, f);
        // (i, B + 1)
        (res += f * C(h - i + w - (b + 1), h - i) % mod) %= mod;
    &amp;#125;
    std::cout &amp;lt;&amp;lt; res &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ç‚¹åˆ°çŸ©å½¢çš„æ–¹æ¡ˆæ•°&#34;&gt;ç‚¹åˆ°çŸ©å½¢çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;p&gt;ä» &lt;span class=&#34;math inline&#34;&gt;\((x_0,y_0)\)&lt;/span&gt; èµ°åˆ°çŸ©å½¢ &lt;span class=&#34;math inline&#34;&gt;\((x_1,y_1,x_2,y_2)\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\sum\limits_{i\in [x_1,x_2],j\in [y_1,y_2]} G(x_0,y_0, i, j) = G(x_0,y_0,x_2 + 1,y_2 + 1)-G(x_0,y_0,x_2+1,y_1)-G(x_0,y_0,x_1,y_2+1)+G(x_0,y_0,x_1,y_1)
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¯æ˜ï¼š&lt;span class=&#34;math inline&#34;&gt;\(G(x_0,y_0,x_2+1,y_2+1)=\sum\limits_i G(x_0,y_0,i,y_2)=\sum\limits_{i,j} G(x_0,y_0,i,j)\)&lt;/span&gt;ï¼Œç±»ä¼¼çš„ï¼ŒæŠŠåé¢å‡ é¡¹å±•å¼€ï¼Œå¯ä»¥å¾—åˆ°å‰ç¼€å’Œçš„ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼ŒçŸ©å½¢å°±å¯ä»¥è¢«æ¦‚æ‹¬æˆ 4 ä¸ªç‚¹äº†ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;çŸ©å½¢åˆ°çŸ©å½¢çš„æ–¹æ¡ˆæ•°&#34;&gt;çŸ©å½¢åˆ°çŸ©å½¢çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;p&gt;æšä¸¾ç¬¬ä¸€ä¸ªçŸ©å½¢é‡Œçš„æ‰€æœ‰ç‚¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°å…³äºç¬¬äºŒä¸ªçŸ©å½¢é‡Œå››ä¸ªç‚¹çš„è¡¨è¾¾å¼ã€‚åè¿‡æ¥æŠŠç¬¬ä¸€ä¸ªçŸ©å½¢æ¦‚æ‹¬ä¸º 4 ä¸ªç‚¹å°±å¯ä»¥å¿«é€Ÿæ±‚è§£äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“ä¸€ç‚¹ï¼Œç¬¬ä¸€ä¸ªçŸ©å½¢ &lt;span class=&#34;math inline&#34;&gt;\((x_1,y_1,x_2,y_2)\)&lt;/span&gt; å¯ä»¥è¢«æ¦‚æ‹¬ä¸º &lt;span class=&#34;math inline&#34;&gt;\((x_1-1,y_1-1)\)&lt;/span&gt;ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\((x_1-1,y_2)\)&lt;/span&gt;ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\((x_2,y_1-1)\)&lt;/span&gt;ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\((x_2,y_2)\)&lt;/span&gt;ã€‚æ³¨æ„æ–¹å‘é¢ å€’å¯¼è‡´ç¬¦å·å‘ç”Ÿå˜åŒ–ã€‚æ­¤æ—¶å¯¹ &lt;span class=&#34;math inline&#34;&gt;\(4\times 4=16\)&lt;/span&gt; ä¸ª &lt;span class=&#34;math inline&#34;&gt;\(G\)&lt;/span&gt; æŒ‰å¯¹åº”çš„ &lt;span class=&#34;math inline&#34;&gt;\(-1/1\)&lt;/span&gt; ç³»æ•°æ±‚å’Œå°±èƒ½å¾—åˆ°ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;d---sightseeing-plan&#34;&gt;D - Sightseeing Plan&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://atcoder.jp/contests/agc018/tasks/agc018_e&#34; class=&#34;uri&#34;&gt;https://atcoder.jp/contests/agc018/tasks/agc018_e&lt;/a&gt;&lt;/p&gt;
&lt;ol type=&#34;1&#34;&gt;
&lt;li&gt;æ’ç­‰å¼ï¼š&lt;span class=&#34;math inline&#34;&gt;\(\sum\limits_{i\in [x_1,x_2]}G_(x_1,y_1,i,y_2-1)=G(x_1,y_1,x_2,y_2)\)&lt;/span&gt;ï¼Œæ”¾åœ¨ç½‘æ ¼å›¾ä¸Šå°±æ˜¯å¼ºåˆ¶èµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\((i,y_2-1)\)&lt;/span&gt;ï¼Œå†å¼ºåˆ¶å‘å³èµ°ä¸€æ­¥ï¼Œç„¶åå‘ä¸Šèµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\((x_2,y_2)\)&lt;/span&gt;ã€‚å’Œä¸Šä¸€é¢˜ç±»ä¼¼çš„ï¼Œå¯ä»¥å‘ç°ä¸é‡ä¸æ¼ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰ä¸ªçŸ©å½¢ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\(M_1\)&lt;/span&gt; ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(M_2\)&lt;/span&gt; åˆ°è¾¾ &lt;span class=&#34;math inline&#34;&gt;\(M_3\)&lt;/span&gt; çš„è·¯å¾„æ•°é‡ï¼šç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(M_2\)&lt;/span&gt; æ—¶ï¼Œæ ¹æ®é™åˆ¶ï¼Œåªå¯èƒ½ä»ä¸‹é¢æˆ–å·¦è¾¹è¿›å…¥ã€‚æšä¸¾è¿›å…¥çš„ç‚¹ &lt;span class=&#34;math inline&#34;&gt;\((x_0,y_0)\)&lt;/span&gt;ï¼ˆæ•°é‡ä¸º &lt;span class=&#34;math inline&#34;&gt;\(O(n)\)&lt;/span&gt;ï¼‰ï¼Œå†è®¡ç®— &lt;span class=&#34;math inline&#34;&gt;\(G(x_0,y_0,M_3)\)&lt;/span&gt; å°±èƒ½å¾—åˆ°ä¸é‡ä¸æ¼çš„ç­”æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;åŸé—®é¢˜ï¼šè¦æ±‚ &lt;span class=&#34;math inline&#34;&gt;\(M_2\)&lt;/span&gt; å†…éƒ¨è·¯å¾„ä¸Šç‚¹çš„è´¡çŒ®å’Œï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(M_2\)&lt;/span&gt; å†…éƒ¨è·¯å¾„é•¿åº¦ã€‚è‹¥ä» &lt;span class=&#34;math inline&#34;&gt;\((x_1,y_1)\)&lt;/span&gt; è¿›å…¥ï¼Œå†ä» &lt;span class=&#34;math inline&#34;&gt;\((x_2,y_2)\)&lt;/span&gt; ç¦»å¼€ï¼Œé•¿åº¦å°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(x_2-x_1+y_2-y_1+1\)&lt;/span&gt;ã€‚æ‹†æˆ &lt;span class=&#34;math inline&#34;&gt;\((x_2+y_2+1)\)&lt;/span&gt; å’Œ &lt;span class=&#34;math inline&#34;&gt;\(-(x_1+y_1)\)&lt;/span&gt; åå‘ç°ä¸€æ¬¡è¿›å…¥å’Œä¸€æ¬¡ç¦»å¼€çš„è´¡çŒ®æ˜¯ç‹¬ç«‹çš„ã€‚åˆ†åˆ«æšä¸¾è¿›å…¥ç‚¹å’Œç¦»å¼€ç‚¹è®¡ç®—è´¡çŒ®å°±å¯ä»¥äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int N = 2e6;
const int mod = 1e9 + 7;
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&amp;quot;.in&amp;quot;, &amp;quot;r&amp;quot;, stdin);
    std::freopen(&amp;quot;.out&amp;quot;, &amp;quot;w&amp;quot;, stdout);
#endif
    int x1, x2, x3, x4, x5, x6, y1, y2, y3, y4, y5, y6;
    std::cin &amp;gt;&amp;gt; x1 &amp;gt;&amp;gt; x2 &amp;gt;&amp;gt; x3 &amp;gt;&amp;gt; x4 &amp;gt;&amp;gt; x5 &amp;gt;&amp;gt; x6;
    std::cin &amp;gt;&amp;gt; y1 &amp;gt;&amp;gt; y2 &amp;gt;&amp;gt; y3 &amp;gt;&amp;gt; y4 &amp;gt;&amp;gt; y5 &amp;gt;&amp;gt; y6;
    std::vector&amp;lt;long long&amp;gt; fac(N + 1), inv(N + 1);
    fac[0] = inv[0] = 1ll;
    for (int i = 1; i &amp;lt;= N; ++i)
        fac[i] = fac[i - 1] * i % mod;
    auto qkp = [](long long x, int y) &amp;#123;
        auto res(1ll);
        for (; y; (x *= x) %= mod, y &amp;gt;&amp;gt;= 1)
            if (y &amp;amp; 1)
                (res *= x) %= mod;
        return res;
    &amp;#125;;
    inv[N] = qkp(fac[N], mod - 2);
    for (int i = N - 1; i; --i)
        inv[i] = inv[i + 1] * (i + 1) % mod;
    auto C = [&amp;amp;](int n, int m) &amp;#123;
        return fac[n] * inv[n - m] % mod * inv[m] % mod;
    &amp;#125;;
    std::vector&amp;lt;std::tuple&amp;lt;int, int, int&amp;gt; &amp;gt; f(4), g(4);
    f[0] = &amp;#123; x1 - 1, y1 - 1, 1 &amp;#125;, f[1] = &amp;#123; x1 - 1, y2, mod - 1 &amp;#125;, f[2] = &amp;#123; x2, y1 - 1, mod - 1 &amp;#125;, f[3] = &amp;#123; x2, y2, 1 &amp;#125;;
    g[0] = &amp;#123; x5, y5, 1 &amp;#125;, g[1] = &amp;#123; x5, y6 + 1, mod - 1 &amp;#125;, g[2] = &amp;#123; x6 + 1, y5, mod - 1 &amp;#125;, g[3] = &amp;#123; x6 + 1, y6 + 1, 1 &amp;#125;; 
    auto G = [&amp;amp;](int x1, int y1, int x2, int y2) &amp;#123;
        auto a(std::abs(x1 - x2)), b(std::abs(y1 - y2));
        return C(a + b, a);
    &amp;#125;;
    auto res = 0ll;
    for (auto [x1, y1, k1] : f)
        for (auto [x2, y2, k2] : g) &amp;#123;
            auto t(0ll);
            for (int x = x3; x &amp;lt;= x4; ++x) &amp;#123;
                (t += G(x1, y1, x, y4) * G(x, y4 + 1, x2, y2) % mod * (x + y4 + 1) % mod) %= mod;
                (t += mod - G(x1, y1, x, y3 - 1) * G(x, y3, x2, y2) % mod * (x + y3) % mod) %= mod;
            &amp;#125;
            for (int y = y3; y &amp;lt;= y4; ++y) &amp;#123;
                (t += G(x1, y1, x4, y) * G(x4 + 1, y, x2, y2) % mod * (x4 + y + 1) % mod) %= mod;
                (t += mod - G(x1, y1, x3 - 1, y) * G(x3, y, x2, y2) % mod * (x3 + y) % mod) %= mod;
            &amp;#125;
            // printf(&amp;quot;(%d, %d, %d), (%d, %d, %d): %lld\n&amp;quot;, x1, y1, k1, x2, y2, k2, t * k1 % mod * k2 % mod);
            (res += t * k1 % mod * k2 % mod) %= mod;
        &amp;#125;
    std::cout &amp;lt;&amp;lt; res &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ä¸ç»è¿‡-yxc-çš„æ–¹æ¡ˆæ•°&#34;&gt;ä¸ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=x+c\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;p&gt;Catalan æ•°çš„ä¸€ç§æ¨å¯¼æ–¹å¼æ˜¯ï¼Œåœ¨ &lt;span class=&#34;math inline&#34;&gt;\(n\times n\)&lt;/span&gt; çš„ç½‘æ ¼ä¸Šï¼Œè¦æ±‚ä¸èƒ½è¶Šè¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=x\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ã€‚å¯ä»¥ç”¨æ€»æ–¹æ¡ˆæ•°å‡å»è¶Šè¿‡çš„æ–¹æ¡ˆæ•°ã€‚&lt;/p&gt;
&lt;p&gt;æ€ä¹ˆè®¡ç®—éæ³•çš„æ–¹æ¡ˆå‘¢ï¼Ÿè¶Šè¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=x\)&lt;/span&gt; çš„è·¯å¾„å¿…å®šå­˜åœ¨ä¸€ä¸ªç‚¹ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt;ï¼ŒåŸé—®é¢˜è½¬åŒ–ä¸ºä¸èƒ½ç¢°åˆ° &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ã€‚&lt;/p&gt;
&lt;p&gt;æŠŠç»ˆç‚¹ &lt;span class=&#34;math inline&#34;&gt;\((n, n)\)&lt;/span&gt; ç¿»æŠ˜åˆ° &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt; ä¸Šæ–¹ï¼Œå¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\((n-1, n + 1)\)&lt;/span&gt;ï¼›å¯¹äºä»»æ„åˆ°è¾¾ &lt;span class=&#34;math inline&#34;&gt;\((n-1,n+1)\)&lt;/span&gt; çš„è·¯å¾„ï¼Œä¸€å®šä¼šæ¥è§¦ &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt; è‡³å°‘ä¸€æ¬¡ï¼›å°†ç¬¬ä¸€æ¬¡æ¥è§¦ä»¥åçš„è·¯å¾„ç¿»æŠ˜åˆ° &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt; ä¸‹æ–¹ï¼Œåˆ™ä¸€å®šå’ŒåŸå›¾ä¸­çš„éæ³•è·¯å¾„ä¸€ä¸€å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;4.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å°±å¯ä»¥å¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(C_{2n}^n-C_{2n}^{n-1}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœé—®é¢˜å˜å¾—æ›´åŠ ä¸€èˆ¬ï¼Œæ±‚è§£åˆ°è¾¾ &lt;span class=&#34;math inline&#34;&gt;\((n, m)\)&lt;/span&gt; ä¸èƒ½ç¢°åˆ° &lt;span class=&#34;math inline&#34;&gt;\(y=x+c\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ï¼Œè¿˜æ˜¯å¯ä»¥æŠŠ &lt;span class=&#34;math inline&#34;&gt;\((n,m)\)&lt;/span&gt; ç¿»æŠ˜åˆ° &lt;span class=&#34;math inline&#34;&gt;\((m-c,n+c)\)&lt;/span&gt;ï¼Œç­”æ¡ˆæ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(C_{n+m}^n-C_{n+m}^{m-c}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ä¸ç»è¿‡-yx-l-å’Œ-yxr-çš„æ–¹æ¡ˆæ•°&#34;&gt;ä¸ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt; å’Œ &lt;span class=&#34;math inline&#34;&gt;\(y=x+r\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æœ‰ &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt; å’Œ &lt;span class=&#34;math inline&#34;&gt;\(y=x+r\)&lt;/span&gt; ä¸¤æ¡çº¿ä½œä¸ºé™åˆ¶ï¼Œç°åœ¨çš„ç¿»æŠ˜æ„ä¹‰å°±ä¼šæœ‰ä¸€ç‚¹æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;5.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚å›¾ä¸­çš„ &lt;span class=&#34;math inline&#34;&gt;\(A&amp;#39;\)&lt;/span&gt;ï¼Œæ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(A\)&lt;/span&gt; æ²¿ç€ &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt; ç¿»æŠ˜ä¸€æ¬¡åçš„ç»“æœã€‚è¿˜æ˜¯æŒ‰ç…§ä¹‹å‰çš„æ–¹å¼æ¥ç†è§£ï¼Œé‚£ä¹ˆèµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\(A&amp;#39;\)&lt;/span&gt; çš„è·¯å¾„ä»£è¡¨è‡³å°‘ç»è¿‡ä¸€æ¬¡ &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt; çš„æ–¹æ¡ˆã€‚&lt;span class=&#34;math inline&#34;&gt;\(A&amp;#39;&amp;#39;\)&lt;/span&gt; æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(A&amp;#39;\)&lt;/span&gt; æ²¿ç€ &lt;span class=&#34;math inline&#34;&gt;\(y=x+r\)&lt;/span&gt; ç¿»æŠ˜ä¸€æ¬¡ä¹‹åå¾—åˆ°çš„ç»“æœï¼Œèµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\(A&amp;#39;&amp;#39;\)&lt;/span&gt; çš„è·¯å¾„å°±ä»£è¡¨è‡³å°‘å…ˆç¢°åˆ°ä¸€æ¬¡ &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt;ï¼Œå†ç¢°åˆ°ä¸€æ¬¡ &lt;span class=&#34;math inline&#34;&gt;\(y=x+r\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæŠŠç›¸é‚»å¤šæ¬¡ç¢°åˆ° &lt;span class=&#34;math inline&#34;&gt;\(y=x-l\)&lt;/span&gt; æˆ– &lt;span class=&#34;math inline&#34;&gt;\(y=x+r\)&lt;/span&gt; åˆå¹¶ä¸ºä¸€æ¬¡ï¼Œæœ€ç»ˆçš„éæ³•è·¯å¾„å°±æ˜¯ &lt;code&gt;LRLRLR...&lt;/code&gt; æˆ–è€… &lt;code&gt;RLRLRL...&lt;/code&gt; çš„å½¢å¼ã€‚å› ä¸ºå¯ä»¥è®¡ç®—çš„æ˜¯ã€Œè‡³å°‘ã€çš„å½¢å¼ï¼Œç”¨å®¹æ–¥åŸç†å¾—åˆ°ï¼Œç­”æ¡ˆæ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(f_{\varnothing}-(f_{\texttt L} + f_{\texttt R}) + (f_{\texttt {LR}} + f_{\texttt {RL}}) - \cdots\)&lt;/span&gt;ã€‚å¯¹åº”è®¡ç®—æ¯ä¸ªç¿»æŠ˜å¯¹åº”ç»ˆç‚¹å’Œç­”æ¡ˆå°±å¯ä»¥äº†ã€‚æœ€åçš„ç­”æ¡ˆæ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(C_{n+m}^n-C_{n+m}^{n+l}-C_{n+m}^{n + r}+C_{n+m}^{n+l-r}+C_{n+m}^{n+r-l}-\cdots\)&lt;/span&gt;ï¼Œå¯ä»¥ç®€åŒ–æˆ &lt;span class=&#34;math inline&#34;&gt;\(\sum\limits_{k\in \mathbb{Z}} C_{n+m}^{n-k\cdot (r-l)}-C_{n+m}^{n-k\cdot (r-l)+r}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h3 id=&#34;e---éª—æˆ‘å‘¢&#34;&gt;E - éª—æˆ‘å‘¢&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.luogu.com.cn/problem/P3266&#34; class=&#34;uri&#34;&gt;https://www.luogu.com.cn/problem/P3266&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¯è¡Œå†…éƒ¨é€’å¢ï¼Œè€Œä¸”é€‰é¡¹åªæœ‰ &lt;span class=&#34;math inline&#34;&gt;\([0,m]\)&lt;/span&gt;ï¼Œé‚£ä¹ˆæ¯è¡Œå°±ä¼šåˆšå¥½åœ¨ &lt;span class=&#34;math inline&#34;&gt;\([0,m]\)&lt;/span&gt; é‡Œé¢è·³è¿‡ä¸€ä¸ªæ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; è¡Œè·³è¿‡çš„æ•°æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(j\)&lt;/span&gt;ï¼Œé‚£ä¹ˆç”»ä¸€ç”»å›¾å°±å¯ä»¥å‘ç°ç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(i+1\)&lt;/span&gt; å¯èƒ½è·³è¿‡çš„æ•°æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\([j-1,m]\)&lt;/span&gt;ï¼›åè¿‡æ¥ï¼Œç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(i-1\)&lt;/span&gt; è¡Œå¯èƒ½è·³è¿‡çš„æ•°å°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\([0,j+1]\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè®© &lt;span class=&#34;math inline&#34;&gt;\(f_{i,j}\)&lt;/span&gt; è¡¨ç¤ºç¡®å®šäº†ç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(1\to i\)&lt;/span&gt; è¡Œï¼Œå…¶ä¸­ç¬¬ &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; è¡Œè·³è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(j\)&lt;/span&gt; çš„æ–¹æ¡ˆæ•°ï¼Œå°±å¯ä»¥å¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(f_{i,j}=\sum\limits_{k=0}^{j+1} f_{i-1,k}\)&lt;/span&gt;ã€‚å‰ç¼€å’Œå¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(f_{i,j}=f_{i,j-1}+f_{i-1,j+1}\)&lt;/span&gt;ã€‚æ³¨æ„è¾¹ç•Œï¼š&lt;span class=&#34;math inline&#34;&gt;\(f_{0,j}=1\)&lt;/span&gt;ï¼›&lt;span class=&#34;math inline&#34;&gt;\(f_{i,0}=f_{i-1,0}+f_{i-1,1}\)&lt;/span&gt;ï¼›&lt;span class=&#34;math inline&#34;&gt;\(f_{i,m}=f_{i,m-1}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¾—åˆ°ç­”æ¡ˆï¼Œè®© &lt;span class=&#34;math inline&#34;&gt;\(g_{i,j}\)&lt;/span&gt; è¡¨ç¤º &lt;span class=&#34;math inline&#34;&gt;\(i\times j\)&lt;/span&gt; çŸ©é˜µçš„æ–¹æ¡ˆæ•°ï¼ˆè¿™æ ·å°±æœ‰æœºä¼šé€šè¿‡æ‰‹æ®µä¼˜åŒ–äº†ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{aligned}
g_{i,j}&amp;amp;=\sum_{k=0}^j f_{i,k}\\
&amp;amp;= f_{i-1,0}+f_{i-1,1}+\sum_{k=1}^j f_{i,k-1}+f_{i-1,k+1}\\
&amp;amp;= g_{i,j-1}+g_{i-1,j+1}
\end{aligned}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¾¹ç•Œæƒ…å†µå‘¢ï¼Œ &lt;span class=&#34;math inline&#34;&gt;\(g_{i, 0} = f_{i,0} = f_{i-1, 0} + f_{i - 1, 1} = g_{i-1,1}\)&lt;/span&gt;ï¼›&lt;span class=&#34;math inline&#34;&gt;\(g_{i,m}=g_{i, m - 1} + f_{i,m}=g_{i-1,m}+g_{i,m-1}\)&lt;/span&gt;ã€‚ &lt;span class=&#34;math inline&#34;&gt;\(g_{i,m+1}=g_{i,m}\)&lt;/span&gt; é¿å…è¾¹ç•Œã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåœ¨ç½‘æ ¼å›¾ä¸Šè½¬ç§»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;2.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;è€ƒè™‘å°†è¿™ä¸ªå›¾å½¢æ‹‰æ­£ï¼Œä»¤ &lt;span class=&#34;math inline&#34;&gt;\((i+i,j)\gets g_{i,j}\)&lt;/span&gt; å¾—åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;3.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;é—®é¢˜å°±è½¬åŒ–ä¸ºï¼Œä» &lt;span class=&#34;math inline&#34;&gt;\((0, 0)\)&lt;/span&gt; èµ°åˆ° &lt;span class=&#34;math inline&#34;&gt;\((m+n+1,n)\)&lt;/span&gt; ä¸”ä¸èƒ½è§¦ç¢° &lt;span class=&#34;math inline&#34;&gt;\(y=x+1\)&lt;/span&gt; å’Œ &lt;span class=&#34;math inline&#34;&gt;\(y=x-m-2\)&lt;/span&gt; ä¸¤æ¡ç›´çº¿çš„æ–¹æ¡ˆæ•°ã€‚&lt;/p&gt;
&lt;details&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;ä¸ç»è¿‡ä¸€èˆ¬è¿‡åŸç‚¹ç›´çº¿çš„æ–¹æ¡ˆæ•°&#34;&gt;ä¸ç»è¿‡ä¸€èˆ¬è¿‡åŸç‚¹ç›´çº¿çš„æ–¹æ¡ˆæ•°&lt;/h2&gt;
&lt;ol type=&#34;1&#34;&gt;
&lt;li&gt;&lt;p&gt;ç±»å‹ä¸€ï¼š&lt;span class=&#34;math inline&#34;&gt;\((0,0)\to (n,m)\)&lt;/span&gt;ï¼Œä¸ç»è¿‡ &lt;span class=&#34;math inline&#34;&gt;\(y=\dfrac mnx\)&lt;/span&gt; çš„æ–¹æ¡ˆï¼Œå…¶ä¸­è¦æ±‚ &lt;span class=&#34;math inline&#34;&gt;\((m,n)=1\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ–¹æ¡ˆä¸º &lt;span class=&#34;math inline&#34;&gt;\(\dfrac {C_{n+m}^n}{n+m}\)&lt;/span&gt;ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
        <category term="æ’åˆ—ç»„åˆ" />
        <category term="å®¹æ–¥åŸç†" />
        <category term="æ•°å­¦" />
        <updated>2025-04-19T02:03:57.000Z</updated>
    </entry>
    <entry>
        <id>https://xsc062.netlify.app/20250216/</id>
        <title>æ‚é¢˜é€‰è°ˆï¼šPublic Round 15</title>
        <link rel="alternate" href="https://xsc062.netlify.app/20250216/"/>
        <content type="html">&lt;p&gt;&lt;a href=&#34;https://pjudge.ac/contest/1914&#34;&gt;PR #15&lt;/a&gt; å‰ä¸¤é¢˜é¢˜è§£ã€‚&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;æœ€å°è¡¨ç¤ºæ³•&#34;&gt;æœ€å°è¡¨ç¤ºæ³•&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://pjudge.ac/contest/1914/problem/21888&#34; class=&#34;uri&#34;&gt;https://pjudge.ac/contest/1914/problem/21888&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä¸å¦¨å‡è®¾æ¯ä¸ª &lt;span class=&#34;math inline&#34;&gt;\(f\)&lt;/span&gt; åœ¨å€¼åŸŸå†…ç­‰æ¦‚ç‡å–å€¼ä»¥ç®€åŒ–é—®é¢˜ã€‚é‚£ä¹ˆæ‰‹ç©ä¸€ä¸‹å¯ä»¥è½»æ¾åœ°å¾—åˆ°è§„å¾‹ï¼šä¸å¦¨å°† &lt;span class=&#34;math inline&#34;&gt;\(\{s\}\)&lt;/span&gt; å¾ªç¯å³ç§»ä¸€ä½çš„ç»“æœè®°ä¸º &lt;span class=&#34;math inline&#34;&gt;\(\{t\}\)&lt;/span&gt;ï¼Œé‚£ä¹ˆ &lt;span class=&#34;math inline&#34;&gt;\(res=\sum\frac 1{\max(|s_i|,|t_i|)}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™çœ‹èµ·æ¥ä»¤äººç–‘æƒ‘ï¼šå¯¹äºä¸åŒçš„ &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt;ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\([f(s_i)=f(t_i)]\)&lt;/span&gt; çš„æœŸæœ›ä¼¼ä¹æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ï¼Œååˆ†å¥‡æ€ªã€‚è¿™å…¶å®ä¸è¡¨è¾¾å¼çš„æ¥æºæœ‰å…³ï¼Œè®° &lt;span class=&#34;math inline&#34;&gt;\(g(s_i, j)\)&lt;/span&gt; è¡¨ç¤º &lt;span class=&#34;math inline&#34;&gt;\(f(s_i)=j\)&lt;/span&gt; çš„æ¦‚ç‡ï¼Œé‚£ä¹ˆä¸Šè¿°ç­‰å¼å¯ä»¥è½¬å†™ä¸º &lt;span class=&#34;math inline&#34;&gt;\(res=\sum\limits_i\sum\limits_jg({s_i},j)\times g(t_i,j)\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå°†æœ€å°è¡¨ç¤ºæ³•å¸¦æ¥çš„åå·®çº³å…¥è€ƒè™‘èŒƒå›´ï¼Œæˆ‘ä»¬å‘ç° &lt;span class=&#34;math inline&#34;&gt;\(g(s,j)\)&lt;/span&gt; å¯¹äºä¸åŒçš„ &lt;span class=&#34;math inline&#34;&gt;\(j\)&lt;/span&gt; å¹¶ä¸æ°¸è¿œç›¸ç­‰ã€‚å…·ä½“åœ°ï¼Œå½“ &lt;span class=&#34;math inline&#34;&gt;\(s\)&lt;/span&gt; å…·æœ‰å¾ªç¯èŠ‚æ—¶ï¼Œæœ€å°å¾ªç¯èŠ‚çš„ç¬¬ä¸€å¤„ç»“å°¾ä¼šäº«æœ‰æ›´å¤§çš„å–å¾—æ¦‚ç‡ã€‚&lt;/p&gt;
&lt;p&gt;æšä¸¾ &lt;span class=&#34;math inline&#34;&gt;\(s_i\)&lt;/span&gt; çš„å› æ•°ä½œä¸ºæœ€å°å¾ªç¯èŠ‚é•¿åº¦çš„æƒ…å†µï¼Œæ˜¾ç„¶ï¼Œå¯¹äºæœ€å°å¾ªç¯èŠ‚ä¸º &lt;span class=&#34;math inline&#34;&gt;\(j\)&lt;/span&gt; çš„æƒ…å†µï¼ˆè¯¥æƒ…å†µå‡ºç°çš„æ¦‚ç‡ï¼Œå®¹æ–¥å¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(p_j=26^j-\sum_{k\mid j}p_k\)&lt;/span&gt;ï¼‰ï¼Œ&lt;span class=&#34;math inline&#34;&gt;\(f(s_i)\)&lt;/span&gt; çš„å–å€¼åœ¨ &lt;span class=&#34;math inline&#34;&gt;\(1\sim j\)&lt;/span&gt; ä¸Šç­‰æ¦‚ç‡åˆ†å¸ƒï¼Œå·®åˆ†å³å¯ç»Ÿè®¡æ¯ä¸ªå€¼åœ¨ä¸åŒå¾ªç¯èŠ‚é•¿åº¦ä¸‹è¢«å–åˆ°çš„æ¦‚ç‡å’Œã€‚&lt;/p&gt;
&lt;p&gt;ç”¨åŸƒç­›è§£å†³æ¯ä¸ªæ•°çš„å› æ•°å’Œ &lt;span class=&#34;math inline&#34;&gt;\(p\)&lt;/span&gt; å€¼ï¼Œé‚£ä¹ˆæ­¤æ—¶å¤æ‚åº¦ç“¶é¢ˆåœ¨äº &lt;span class=&#34;math inline&#34;&gt;\(g(s_i, j)\)&lt;/span&gt; å’Œ &lt;span class=&#34;math inline&#34;&gt;\(\sum\limits_i\sum\limits_jg({s_i},j)\times g(t_i,j)\)&lt;/span&gt; çš„æ±‚è§£ã€‚å®¹æ˜“å‘ç°åªæœ‰æ¯ä¸ª &lt;span class=&#34;math inline&#34;&gt;\(g(s_i,j),j\mid |s_i|\)&lt;/span&gt; çš„å€¼æ˜¯æœ‰æ•ˆçš„ï¼ˆå…¶ä»–çš„å’Œå®ƒä»¬å€¼éƒ½ç›¸åŒï¼‰ï¼Œè€ƒè™‘åªæ±‚è§£å’Œåˆ©ç”¨è¿™äº›å€¼ï¼Œç±» &lt;code&gt;std::merge&lt;/code&gt;ï¼ˆå³å½’å¹¶æ’åºï¼‰åœ°æ±‚è§£ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ç‰¹åˆ¤ &lt;span class=&#34;math inline&#34;&gt;\(n=1\)&lt;/span&gt;ã€‚ä¼šå¾—åˆ°é”™è¯¯ç­”æ¡ˆçš„åŸå› æ˜¯æ­¤æ—¶å­˜åœ¨ &lt;span class=&#34;math inline&#34;&gt;\(s_i=t_i\)&lt;/span&gt;ï¼Œä¸æ»¡è¶³åŸºæœ¬è¦æ±‚ã€‚&lt;/p&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int lim = 1e5;
const int mod = 998244353;
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&amp;quot;.in&amp;quot;, &amp;quot;r&amp;quot;, stdin);
    std::freopen(&amp;quot;.out&amp;quot;, &amp;quot;w&amp;quot;, stdout);
#endif
    int n;
    std::cin &amp;gt;&amp;gt; n;
    if (n == 1) &amp;#123;
        std::cout &amp;lt;&amp;lt; 1 &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
        return 0;
    &amp;#125;
    auto qkp = [](long long x, int y) &amp;#123;
        long long res = 1ll;
        for (; y; y &amp;gt;&amp;gt;= 1, (x *= x) %= mod)
            if (y &amp;amp; 1)
                (res *= x) %= mod;
        return res;
    &amp;#125;;
    auto inv = [&amp;amp;](int x) &amp;#123;
        return qkp(x, mod - 2);
    &amp;#125;;
    std::vector&amp;lt;long long&amp;gt; f(lim + 1);
    std::vector&amp;lt;std::vector&amp;lt;int&amp;gt; &amp;gt; fac(lim + 1);
    for (int i = 1; i &amp;lt;= lim; ++i) &amp;#123;
        static long long now = 26;
        (f[i] += now) %= mod;
        fac[i].push_back(i);
        for (int j = 2 * i; j &amp;lt;= lim; j += i)
            (f[j] += mod - f[i]) %= mod, fac[j].push_back(i);
        (now *= 26) %= mod;
    &amp;#125;
    for (int i = 1; i &amp;lt;= lim; ++i)
        (f[i] *= inv(i)) %= mod;
    std::vector&amp;lt;int&amp;gt; a(n + 1);
    struct _ &amp;#123; int l, r; long long f; &amp;#125;;
    std::vector&amp;lt;std::vector&amp;lt;_&amp;gt; &amp;gt; g(lim + 1);
    for (int i = 1; i &amp;lt;= n; ++i) &amp;#123;
        std::cin &amp;gt;&amp;gt; a[i];
        if (g[a[i]].empty()) &amp;#123;
            g[a[i]].resize(fac[a[i]].size());
            for (int j = 0; j &amp;lt; (int)fac[a[i]].size(); ++j) &amp;#123;
                g[a[i]][j].l = (j ? g[a[i]][j - 1].r + 1 : 1);
                g[a[i]][j].r = fac[a[i]][j];
                (g[a[i]][0].f += f[fac[a[i]][j]]) %= mod;
                if (j != (int)fac[a[i]].size() - 1)
                    (g[a[i]][j + 1].f += mod - f[fac[a[i]][j]]) %= mod;
            &amp;#125;
            for (int j = 1; j &amp;lt; (int)fac[a[i]].size(); ++j)
                (g[a[i]][j].f += g[a[i]][j - 1].f) %= mod;
            int getinv = inv(qkp(26, a[i]));
            for (int j = 0; j &amp;lt; (int)fac[a[i]].size(); ++j)
                (g[a[i]][j].f *= getinv) %= mod;
        &amp;#125;
    &amp;#125;
    std::vector&amp;lt;int&amp;gt; b(n + 1);
    std::rotate_copy(a.begin() + 1, --a.end(), a.end(), b.begin() + 1);
    long long res = 0ll;
    for (int i = 1; i &amp;lt;= n; ++i) &amp;#123;
        for (int j = 0, k = 0, now = 0;
            j &amp;lt; (int)fac[a[i]].size() &amp;amp;&amp;amp; k &amp;lt; (int)fac[b[i]].size(); )
            if (g[a[i]][j].r &amp;lt; g[b[i]][k].r) &amp;#123;
                (res += g[a[i]][j].f * g[b[i]][k].f % mod
                    * (g[a[i]][j].r - now) % mod) %= mod;
                now = g[a[i]][j].r, ++j;
            &amp;#125;
            else if (g[a[i]][j].r == g[b[i]][k].r) &amp;#123;
                (res += g[a[i]][j].f * g[b[i]][k].f % mod
                    * (g[a[i]][j].r - now) % mod) %= mod;
                now = g[a[i]][j].r, ++j, ++k;
            &amp;#125;
            else &amp;#123;
                (res += g[a[i]][j].f * g[b[i]][k].f % mod
                    * (g[b[i]][k].r - now) % mod) %= mod;
                now = g[b[i]][k].r, ++k;
            &amp;#125;
    &amp;#125;
    std::cout &amp;lt;&amp;lt; res &amp;lt;&amp;lt; &amp;#39;\n&amp;#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
&lt;hr /&gt;
&lt;h2 id=&#34;äºŒå‰æœç´¢æ ‘&#34;&gt;äºŒå‰æœç´¢æ ‘&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://pjudge.ac/contest/1914/problem/21889&#34; class=&#34;uri&#34;&gt;https://pjudge.ac/contest/1914/problem/21889&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬å¤„ç†é“¾çš„éƒ¨åˆ†åˆ†æ—¶ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ç”¨å·®åˆ†è§£å†³é—®é¢˜ã€‚æŠŠæ›´æ–° &lt;span class=&#34;math inline&#34;&gt;\([l, r]\)&lt;/span&gt; çœ‹ä½œåœ¨å·®åˆ†æ•°ç»„ &lt;span class=&#34;math inline&#34;&gt;\(l\)&lt;/span&gt; å¤„æ’å…¥ï¼Œåœ¨ &lt;span class=&#34;math inline&#34;&gt;\(r+1\)&lt;/span&gt; å¤„åˆ é™¤ï¼Œç¦»çº¿ä¸‹æ¥å†ä»å·¦åˆ°å³æ‰«ä¸€éæ“ä½œï¼Œè€ƒè™‘å¦‚ä½•è§£å†³æŸ¥è¯¢é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘å¦‚ä½•è·å– &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; æ ‘ä¸Š &lt;span class=&#34;math inline&#34;&gt;\(t_0\)&lt;/span&gt; æ—¶åˆ»ç‚¹ &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; çš„æ‰€æœ‰ç¥–å…ˆã€‚æ ¹æ®å‰é¢çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥è·å– &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; æ ‘ä¸Šå­˜åœ¨è¿‡çš„æ‰€æœ‰å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ¯” &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; å¤§çš„å…ƒç´ ï¼Œè€ƒè™‘ç¥–å…ˆ &lt;span class=&#34;math inline&#34;&gt;\(p_a\)&lt;/span&gt; å’Œéç¥–å…ˆ &lt;span class=&#34;math inline&#34;&gt;\(p\)&lt;/span&gt; æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚æ ¹æ® BST çš„æ€§è´¨æ˜“å¾—ï¼Œå¯¹äºæœ€ä½çš„å³ä¾§ç¥–å…ˆ &lt;span class=&#34;math inline&#34;&gt;\({p_a}_0\)&lt;/span&gt;ï¼Œå…¶æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(\ge x\)&lt;/span&gt; çš„æœ€å°çš„å…ƒç´ ï¼ˆå½“ç„¶å…¶åŠ å…¥æ—¶åˆ» &lt;span class=&#34;math inline&#34;&gt;\(t_a&amp;lt;t_0\)&lt;/span&gt;ï¼‰ï¼›é‚£ä¹ˆåŒç†å¯ä»¥æ‰¾åˆ° &lt;span class=&#34;math inline&#34;&gt;\({p_a}_0\)&lt;/span&gt; å³ä¾§æœ€ä½çš„ç¥–å…ˆï¼ˆå…¶å·¦ä¾§çš„ç¥–å…ˆæ˜¾ç„¶ä¹Ÿ &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; å·¦ä¾§ï¼‰ï¼Œè¯¥ç¥–å…ˆæ»¡è¶³ &lt;span class=&#34;math inline&#34;&gt;\(t&amp;lt;t_a\)&lt;/span&gt;ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä»å·¦å³ä¸¤è¾¹åˆ†åˆ«å¾—åˆ° &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; çš„æ‰€æœ‰ç¥–å…ˆã€‚å®¹æ˜“è¯æ˜è¯¥è¿‡ç¨‹å¯¹äºä¸åœ¨æ ‘ä¸Šçš„ &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt; ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“åœ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿæ±‚å‡º &lt;span class=&#34;math inline&#34;&gt;\(\ge x\)&lt;/span&gt; çš„å…ƒç´ ä¸­ï¼Œä»¥ &lt;span class=&#34;math inline&#34;&gt;\(t_0\)&lt;/span&gt; ä¸ºèµ·ç‚¹çš„å‰ç¼€æœ€å°å€¼åºåˆ—çš„åŒºé—´å’Œã€‚&lt;/p&gt;
&lt;p&gt;æ¬¸ â˜ğŸ¤“ è¿™æ˜¯ä»€ä¹ˆï¼Ÿ&lt;a href=&#34;/20250217&#34;&gt;æ¥¼æˆ¿é‡å»º&lt;/a&gt;ï¼ç§’ä¸€ä¸‹ï¼&lt;/p&gt;
&lt;p&gt;è¿›ä¸€æ­¥åœ°ï¼Œæœ¬é¢˜éœ€è¦å®Œæˆå¯¹äº &lt;span class=&#34;math inline&#34;&gt;\(t_0\)&lt;/span&gt; ä¸ºåºåˆ—å¤´çš„æŸ¥è¯¢ã€‚å†æ¬¡åˆ©ç”¨æ€§è´¨ï¼Œæ¯æ¬¡ &lt;span class=&#34;math inline&#34;&gt;\(O(\log V)\)&lt;/span&gt; åœ°åˆå¹¶ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¥½çš„é‚£ä¹ˆæ€ä¹ˆæŠŠé“¾æåˆ°æ ‘ä¸Šå‘¢ï¼ŸæŠŠå·®åˆ†æ”¾åˆ°æ ‘ä¸Šï¼Œå†™ä¸ªçº¿æ®µæ ‘åˆå¹¶å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ç”±äºè¿™é¢˜ç»†èŠ‚å¤ªå¤šäº†ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€è¦èˆå¼ƒä¸å¿…è¦çš„æ—¶ç©ºä¼˜åŒ–æ¢å–ä»£ç ç®€æ´åº¦ä»¥æ–¹ä¾¿è°ƒè¯•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;details&gt;
&lt;pre data-line=&#34;12&#34; class=&#34;cpp language-cpp&#34;&gt;&lt;code data-line=&#34;12&#34; class=&#34;cpp language-cpp&#34;&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
const int lim = 2e5;
const int maxn = 2e7 + 5;
const int inf = 0x3f3f3f3f;
struct &amp;#123;
    int l, r, rv;
    long long u;
&amp;#125; t[maxn];
std::vector&amp;lt;int&gt; tr;
#define lt t[p].l
#define rt t[p].r
int newnode(void) &amp;#123;         // æˆ‘çŸ¥é“ä½ è¦è¯´ä»€ä¹ˆï¼Œä½†è¿™å±äºã€Œå¿…è¦çš„ã€ç©ºé—´ä¼˜åŒ– ğŸ˜¥
    static int tot = 0;
    if (tr.empty())
        return ++tot;
    auto p(tr.back());
    t[p].l = t[p].r = 0;
    tr.pop_back();
    return p;
&amp;#125;
long long askv(int p, int l, int r, int v) &amp;#123;
    if (l == r)
        return t[p].rv &lt; v ? t[p].u : 0;
    int mid = (l + r) &gt;&gt; 1;
    if (v &gt; t[lt].rv)
        return t[p].u - t[lt].u + askv(lt, l, mid, v);
    return askv(rt, mid + 1, r, v);
&amp;#125;
void pushup(int p, int l, int r) &amp;#123;
    t[p].rv = std::min(t[lt].rv, t[rt].rv);
    int mid = (l + r) &gt;&gt; 1;
    t[p].u = t[lt].u + askv(rt, mid + 1, r, t[lt].rv);
    return;
&amp;#125;
void upd(int &amp;p, int l, int r, int x, int v, int u) &amp;#123;
    if (!p)
        p = newnode();
    if (l == r) &amp;#123;
        t[p].rv = v, t[p].u = u;
        return;
    &amp;#125;
    int mid = (l + r) &gt;&gt; 1;
    if (x &lt;= mid)
        upd(lt, l, mid, x, v, u);
    else
        upd(rt, mid + 1, r, x, v, u);
    pushup(p, l, r);
    return;
&amp;#125;
void merge(int &amp;p, int q, int l, int r) &amp;#123;
    if (!p || !q) &amp;#123;
        p += q;
        return;
    &amp;#125;
    if (l == r) &amp;#123;
        t[p].rv = std::min(t[p].rv, t[q].rv);
        t[p].u = std::max(t[p].u, t[q].u);
        return;
    &amp;#125;
    int mid = (l + r) &gt;&gt; 1;
    merge(t[p].l, t[q].l, l, mid), merge(t[p].r, t[q].r, mid + 1, r);
    pushup(p, l, r), tr.push_back(q);
    return;
&amp;#125;
int qv = inf;
long long ask(int p, int l, int r, int ql, int qr) &amp;#123;
    if (ql &lt;= l &amp;&amp; r &lt;= qr) &amp;#123;
        auto s(askv(p, l, r, qv));
        qv = std::min(qv, t[p].rv);
        return s;
    &amp;#125;
    int mid = (l + r) &gt;&gt; 1;
    long long res = 0ll;
    if (ql &lt;= mid)
        res = ask(lt, l, mid, ql, qr);
    if (qr &gt; mid)
        res += ask(rt, mid + 1, r, ql, qr);
    return res;
&amp;#125;
#undef lt
#undef rt
int main() &amp;#123;
#ifdef ONLINE_JUDGE
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr), std::cout.tie(nullptr);
#else
    std::freopen(&#34;ex_problem4.in&#34;, &#34;r&#34;, stdin);
    std::freopen(&#34;.out&#34;, &#34;w&#34;, stdout);
#endif
    int n, m;
    std::cin &gt;&gt; n &gt;&gt; m;
    std::vector&amp;lt;std::vector&amp;lt;int&gt; &gt; g(n + 1);
    for (int i = 1, x, y; i &lt; n; ++i) &amp;#123;
        std::cin &gt;&gt; x &gt;&gt; y;
        g[x].push_back(y), g[y].push_back(x);
    &amp;#125;
    std::vector&amp;lt;int&gt; top(n + 1), fa(n + 1), siz(n + 1), son(n + 1), dep(n + 1);
    std::function&amp;lt;void(int, int)&gt; DFS = [&amp;](int x, int faa) &amp;#123;
        siz[x] = 1;
        for (auto i : g[x])
            if (i != faa) &amp;#123;
                fa[i] = x, dep[i] = dep[x] + 1;
                DFS(i, x), siz[x] += siz[i];
                if (siz[i] &gt; siz[son[x]])
                    son[x] = i;
            &amp;#125;
        return;
    &amp;#125;;
    DFS(1, -1);
    DFS = [&amp;](int x, int topp) &amp;#123;
        top[x] = topp;
        if (son[x])
            DFS(son[x], topp);
        for (auto i : g[x])
            if (i != fa[x] &amp;&amp; i != son[x])
                DFS(i, i);
        return;
    &amp;#125;;
    DFS(1, 1);
    auto getLCA = [&amp;](int x, int y) &amp;#123;
        for (; top[x] != top[y]; x = fa[top[x]])
            if (dep[top[y]] &gt; dep[top[x]])
                std::swap(x, y);
        return (dep[x] &lt; dep[y] ? x : y);
    &amp;#125;;
    std::vector&amp;lt;std::vector&amp;lt;int&gt; &gt; d(n + 1);
    std::vector&amp;lt;std::vector&amp;lt;std::pair&amp;lt;int, int&gt; &gt; &gt; u(n + 1);
    std::vector&amp;lt;std::vector&amp;lt;std::tuple&amp;lt;int, int, int&gt; &gt; &gt; q(n + 1);
    int cnt = 0;
    for (int i = 1; i &lt;= m; ++i) &amp;#123;
        int op;
        std::cin &gt;&gt; op;
        if (op == 0) &amp;#123;
            int x, v;
            std::cin &gt;&gt; x &gt;&gt; v;
            q[x].emplace_back(++cnt, i, v);
        &amp;#125; else &amp;#123;
            int x, y, v;
            std::cin &gt;&gt; x &gt;&gt; y &gt;&gt; v;
            int faa = getLCA(x, y);
            u[x].emplace_back(i, v), u[y].emplace_back(i, v);
            if (fa[faa])
                d[fa[faa]].emplace_back(v);
        &amp;#125;
    &amp;#125;
    std::vector&amp;lt;long long&gt; res(cnt + 1);
    std::vector&amp;lt;std::vector&amp;lt;int&gt; &gt; rt(2, std::vector&amp;lt;int&gt; (n + 1));
    t[0].rv = inf;
    DFS = [&amp;](int x, int fa) &amp;#123;
        for (auto i : g[x])
            if (i != fa) &amp;#123;
                DFS(i, x);
                merge(rt[0][x], rt[0][i], 1, lim);
                merge(rt[1][x], rt[1][i], 1, lim);
            &amp;#125;
        for (auto [t, v] : u[x]) &amp;#123;
            upd(rt[0][x], 1, lim, v, t, v);
            upd(rt[1][x], 1, lim, lim - v + 1, t, v);
        &amp;#125;
        for (auto v : d[x]) &amp;#123;
            upd(rt[0][x], 1, lim, v, inf, 0);
            upd(rt[1][x], 1, lim, lim - v + 1, inf, 0);
        &amp;#125;
        for (auto [id, t, v] : q[x]) &amp;#123;
            qv = t, res[id] = ask(rt[0][x], 1, lim, v, lim);
            qv = t, res[id] += ask(rt[1][x], 1, lim, lim - v + 1, lim);
            qv = t, res[id] -= ask(rt[0][x], 1, lim, v, v);
        &amp;#125;
    &amp;#125;;
    DFS(1, -1);
    for (int i = 1; i &lt;= cnt; ++i)
        std::cout &lt;&lt; res[i] &lt;&lt; &#39;\n&#39;;
    return 0;
&amp;#125;&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
</content>
        <category term="çº¿æ®µæ ‘" />
        <category term="æ•°å­¦" />
        <category term="æ ‘ä¸Šå·®åˆ†" />
        <updated>2025-02-16T11:44:38.000Z</updated>
    </entry>
    <entry>
        <id>https://xsc062.netlify.app/20240111/</id>
        <title>è§£é¢˜æŠ¥å‘Šï¼šGame with Probability Problem</title>
        <link rel="alternate" href="https://xsc062.netlify.app/20240111/"/>
        <content type="html">&lt;p&gt;&lt;a href=&#34;https://www.becoder.com.cn/contest/4665/problem/2&#34;&gt;SP4060 Game with Probability Problem&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;hr /&gt;
&lt;p&gt;è®¾ &lt;span class=&#34;math inline&#34;&gt;\(f_i,g_i\)&lt;/span&gt; åˆ†åˆ«è¡¨ç¤ºè¿˜å‰© &lt;span class=&#34;math inline&#34;&gt;\(i\)&lt;/span&gt; ä¸ªçš„æ—¶å€™è½®åˆ° Alice å’Œ Bob æ—¶ &lt;strong&gt;Alice&lt;/strong&gt; åˆ†åˆ«çš„èƒœç‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¦‚ç‡ç»å…¸å€’æ¨ã€‚é‚£ä¹ˆæ˜¾ç„¶æœ‰ &lt;span class=&#34;math inline&#34;&gt;\(f_0=0,g_0=1\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå°±æ˜¯ä¸€ä¸ªåˆ†è®¨ï¼Œè®¨è®ºè¿™ä¸ªäººæƒ³è¦æ­£é¢è¿˜æ˜¯åé¢ã€‚å¾ˆæ˜¾ç„¶ï¼Œå¯¹äºåŒæ ·çš„å‰©ä½™æ£‹å­æ•°ï¼Œä¸¤ä¸ªäººå…ˆæ‰‹çš„æƒ…å†µå¯¹äºè¿™é¢—æ£‹å­çš„å–œçˆ±ç¨‹åº¦æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¹ˆéƒ½æƒ³è¦ï¼Œè¦ä¹ˆéƒ½ä¸æƒ³è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ—¶å€™æƒ³è¦å‘¢ï¼Ÿæ‹¿æ‰è¿‡åè‡ªå·±èƒœç‡æ›´å¤§ï¼Œä¹Ÿå°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(g_{i-1}&amp;gt;f_{i-1}\)&lt;/span&gt;ã€‚æ­¤æ—¶æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
f_i=(1-p)\times g_i+p\times g_{i-1}\\
g_i=(1-q)\times f_i+q\times f_{i-1}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°æ˜¯äº’ç›¸å½±å“çš„ï¼Œè¿™ä¸ªæ—¶å€™å…ˆä¸è¦ç€æ€¥æ€€ç–‘è‡ªå·±æ¨é”™äº†ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œæœ‰ä¸¤ä¸ªæœªçŸ¥æ•°ï¼Œåˆåˆšå¥½æœ‰ä¸¤ä¸ªæ–¹ç¨‹ï¼Œæš´è§£ä¸€ä¸‹å°±æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
f_i=\dfrac {(1-p)\times q\times f_{i-1}+p\times g_{i-1}}{1-(1-p)(1-q)}\\
g_i=\dfrac {(1-q)\times p\times g_{i-1}+q\times f_{i-1}}{1-(1-p)(1-q)}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç„¶å &lt;span class=&#34;math inline&#34;&gt;\(g_{i-1}&amp;lt;f_{i-1}\)&lt;/span&gt; çš„æƒ…å†µä¹Ÿå·®ä¸å¤šï¼ŒæŠŠæ‹¿çš„æ¦‚ç‡å’Œä¸æ‹¿çš„æ¦‚ç‡æ¢ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
f_i=p\times g_i+(1-p)\times g_{i-1}\\
g_i=q\times f_i+(1-q)\times f_{i-1}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è§£æ–¹ç¨‹ç»„æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
f_i=\dfrac {(1-q)\times p\times f_{i-1}+(1-p)\times g_{i-1}}{1-p\times q}\\
g_i=\dfrac {(1-p)\times q\times g_{i-1}+(1-q)\times f_{i-1}}{1-p\times q}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥å¼€å§‹ DP äº†ã€‚æœ€åçš„ç­”æ¡ˆå°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(f_{\min(n,1000)}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸ªé—®é¢˜å°±æ˜¯ &lt;span class=&#34;math inline&#34;&gt;\(n\)&lt;/span&gt; ç‰¹åˆ«å¤§ç„¶åè¿™ä¸ªçœ‹èµ·æ¥ä¹Ÿä¸å¤ªèƒ½çŸ©ä¹˜ï¼Œä½†æ˜¯è¿™ä¸ª DP å¼æœ‰ä¸ªå¥½å¤„æ˜¯å®ƒçš„å¢é•¿è¶‹åŠ¿æ˜¯æŒ‡æ•°çº§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ DP åˆ° &lt;span class=&#34;math inline&#34;&gt;\(1000\)&lt;/span&gt; å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;details&gt;
&lt;pre class=&#34;cpp&#34;&gt;&lt;code&gt;#include &amp;lt;bits/stdc++.h&amp;gt;
namespace XSC062 &amp;#123;
const int maxn = 1e3 + 5;
using db = double;
db p, q;
int T, n;
db f[maxn], g[maxn];
int min(int x, int y) &amp;#123;
    return x &amp;lt; y ? x : y;
&amp;#125;
int main() &amp;#123;
    scanf(&amp;quot;%d&amp;quot;, &amp;amp;T);
    while (T--) &amp;#123;
        scanf(&amp;quot;%d %lf %lf&amp;quot;, &amp;amp;n, &amp;amp;p, &amp;amp;q);
        f[0] = .0, g[0] = 1.0;
        for (int i = 1; i &amp;lt;= n &amp;amp;&amp;amp; i &amp;lt;= 1000; ++i) &amp;#123;
            if (g[i - 1] &amp;gt; f[i - 1]) &amp;#123;
                f[i] = ((1 - p) * q * f[i - 1] + p * g[i - 1]) / (1 - (1 - p) * (1 - q));
                g[i] = ((1 - q) * p * g[i - 1] + q * f[i - 1]) / (1 - (1 - p) * (1 - q));
            &amp;#125;
            else &amp;#123;
                f[i] = ((1 - q) * p * f[i - 1] + (1 - p) * g[i - 1]) / (1 - p * q);
                g[i] = ((1 - p) * q * g[i - 1] + (1 - q) * f[i - 1]) / (1 - p * q);
            &amp;#125;
        &amp;#125;
        printf(&amp;quot;%.6lf\n&amp;quot;, f[min(n, 1000)]);
    &amp;#125;
    return 0;
&amp;#125;
&amp;#125; // namespace XSC062
int main() &amp;#123;
    XSC062::main();
    return 0;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
</content>
        <category term="DP" />
        <category term="æ•°å­¦" />
        <updated>2024-01-11T03:25:19.000Z</updated>
    </entry>
</feed>
